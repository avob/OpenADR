{"ast":null,"code":"import _classCallCheck from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/src/components/common/EventSignalPanel.js\";\nimport React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport AddIcon from '@material-ui/icons/Add';\nimport Button from '@material-ui/core/Button';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { lighten } from '@material-ui/core/styles/colorManipulator';\nvar signalTypeMenuItems = [{\n  name: \"delta\",\n  label: \"Delta\",\n  description: \"Signal indicates the amount to change from what one would have used without the signal\"\n}, {\n  name: \"level\",\n  label: \"Level\",\n  description: \"Signal indicates a program level\"\n}, {\n  name: \"multiplier\",\n  label: \"Multiplier\",\n  description: \"Signal indicates a multiplier applied to the current rate of delivery or usage from what one would have used without the signal\"\n}, {\n  name: \"price\",\n  label: \"Price\",\n  description: \"Signal indicates the price\"\n}, {\n  name: \"priceMultiplier\",\n  label: \"Price Multiplier\",\n  description: \"Signal indicates the price multiplier. Extended price is the computed price value multiplied by the number of units\"\n}, {\n  name: \"priceRelative\",\n  label: \"Price Relative\",\n  description: \"Signal indicates the relative price\"\n}, {\n  name: \"setpoint\",\n  label: \"Set Point\",\n  description: \"Signal indicates a target amount of units\"\n}, {\n  name: \"x-loadControlCapacity\",\n  label: \"Load Control Capacity\",\n  description: \"This is an instruction for the load controller to operate at a level that is some percentage of its maximum load consumption capacity. This can be mapped to specific load controllers to do things like duty cycling. Note that 1.0 refers to 100% consumption. In the case of simple ON/OFF type devices then 0 = OFF and 1 = ON\"\n}, {\n  name: \"x-loadControlLevelOffset\",\n  label: \"Load Control Level Offset\",\n  description: \"Discrete integer levels that are relative to normal operations where 0 is normal operations\"\n}, {\n  name: \"x-loadControlPercentOffset\",\n  label: \"Load Control Percent Offset\",\n  description: \"Percentage change from normal load control operations\"\n}, {\n  name: \"x-loadControlSetPoint\",\n  label: \"Load Control Set Point\",\n  description: \"Load controller set points\"\n}];\nvar signalNameMenuItems = [{\n  name: \"BID_ENERGY\",\n  label: \"Bid Energy\",\n  description: \"This is the amount of energy from a resource that was bid into a program\"\n}, {\n  name: \"BID_LOAD\",\n  label: \"Bid Load\",\n  description: \"This is the amount of load that was bid by a resource into a program\"\n}, {\n  name: \"BID_PRICE\",\n  label: \"Bid Price\",\n  description: \"This is the price that was bid by the resource\"\n}, {\n  name: \"CHARGE_STATE\",\n  label: \"Charge State\",\n  description: \"State of energy storage resource\"\n}, {\n  name: \"DEMAND_CHARGE\",\n  label: \"Demand Charge\",\n  description: \"This is the demand charge\"\n}, {\n  name: \"ELECTRICITY_PRICE\",\n  label: \"Electricity Price\",\n  description: \"This is the cost of electricity\"\n}, {\n  name: \"ENERGY_PRICE\",\n  label: \"Energy Price\",\n  description: \"This is the cost of energy\"\n}, {\n  name: \"LOAD_CONTROL\",\n  label: \"Load Control\",\n  description: \"Set load output to relative values\"\n}, {\n  name: \"LOAD_DISPATCH\",\n  label: \"Load Dispatch\",\n  description: \"This is used to dispatch load\"\n}, {\n  name: \"SIMPLE\",\n  label: \"Simple\",\n  description: \"Simple levels (OpenADR 2.0a compliant) \"\n}, {\n  name: \"SIMPLE_DEPRECATED\",\n  label: \"Simple (deprecated)\",\n  description: \"depreciated - for backwards compatibility with A profile\"\n}];\nvar unitMenuItems = {\n  currencyPerKwh: [{\n    name: \"euro_per_kwh\",\n    label: \"â‚¬ / kWh\",\n    description: \"Euro per kWh\"\n  }, {\n    name: \"dollar_per_kwh\",\n    label: \"$ / kWh\",\n    description: \"Euro per kWh\"\n  }],\n  energy: [{\n    name: \"kwh\",\n    label: \"kWh\",\n    description: \"kWh\"\n  }],\n  power: [{\n    name: \"kw\",\n    label: \"kW\",\n    description: \"kW\"\n  }],\n  none: [{\n    name: \"none\",\n    label: \"None\",\n    description: \"None\"\n  }]\n};\nvar validSignalCombination = [{\n  signalName: \"SIMPLE\",\n  signalType: \"level\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"ELECTRICITY_PRICE\",\n  signalType: \"price\",\n  unit: unitMenuItems.currencyPerKwh\n}, {\n  signalName: \"ELECTRICITY_PRICE\",\n  signalType: \"priceRelative\",\n  unit: unitMenuItems.currencyPerKwh\n}, {\n  signalName: \"ELECTRICITY_PRICE\",\n  signalType: \"priceMultiplier\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"ENERGY_PRICE\",\n  signalType: \"priceRelative\",\n  unit: unitMenuItems.currencyPerKwh\n}, {\n  signalName: \"ENERGY_PRICE\",\n  signalType: \"priceMultiplier\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"ENERGY_PRICE\",\n  signalType: \"price\",\n  unit: unitMenuItems.currencyPerKwh\n}, {\n  signalName: \"DEMAND_CHARGE\",\n  signalType: \"priceRelative\",\n  unit: unitMenuItems.currencyPerKwh\n}, {\n  signalName: \"DEMAND_CHARGE\",\n  signalType: \"priceMultiplier\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"DEMAND_CHARGE\",\n  signalType: \"price\",\n  unit: unitMenuItems.currencyPerKwh\n}, {\n  signalName: \"BID_PRICE\",\n  signalType: \"price\",\n  unit: unitMenuItems.currencyPerKwh\n}, {\n  signalName: \"BID_LOAD\",\n  signalType: \"setpoint\",\n  unit: unitMenuItems.power\n}, {\n  signalName: \"BID_ENERGY\",\n  signalType: \"setpoint\",\n  unit: unitMenuItems.energy\n}, {\n  signalName: \"CHARGE_STATE\",\n  signalType: \"setpoint\",\n  unit: unitMenuItems.energy\n}, {\n  signalName: \"CHARGE_STATE\",\n  signalType: \"delta\",\n  unit: unitMenuItems.energy\n}, {\n  signalName: \"CHARGE_STATE\",\n  signalType: \"multiplier\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"LOAD_DISPATCH\",\n  signalType: \"setpoint\",\n  unit: unitMenuItems.power\n}, {\n  signalName: \"LOAD_DISPATCH\",\n  signalType: \"delta\",\n  unit: unitMenuItems.power\n}, {\n  signalName: \"LOAD_DISPATCH\",\n  signalType: \"multiplier\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"LOAD_DISPATCH\",\n  signalType: \"level\",\n  unit: unitMenuItems.power\n}, {\n  signalName: \"LOAD_CONTROL\",\n  signalType: \"x-loadControlCapacity\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"LOAD_CONTROL\",\n  signalType: \"x-loadControlPercentOffset\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"LOAD_CONTROL\",\n  signalType: \"x-loadControlSetPoint\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"LOAD_CONTROL\",\n  signalType: \"x-loadControlLevelOffset\",\n  unit: unitMenuItems.none\n}];\n\nvar getAvailableSignalType = function getAvailableSignalType(signalName) {\n  var validSignalType = [];\n\n  for (var i in validSignalCombination) {\n    var combination = validSignalCombination[i];\n\n    if (combination.signalName === signalName) {\n      validSignalType.push(combination.signalType);\n    }\n  }\n\n  return validSignalType;\n};\n\nvar getAvailableUnitType = function getAvailableUnitType(signalName, signalType) {\n  var validUnitType = [];\n\n  for (var i in validSignalCombination) {\n    var combination = validSignalCombination[i];\n\n    if (combination.signalName === signalName && combination.signalType === signalType) {\n      validUnitType = validUnitType.concat(combination.unit);\n    }\n  }\n\n  return validUnitType;\n};\n\nvar labelStyle = {\n  boxSizing: 'border-box',\n  color: 'rgba(0, 0, 0, 0.54)',\n  fontSize: '1rem',\n  fontWeight: 400,\n  lineHeight: 1,\n  transition: 'color 200ms cubic-bezier(0.0, 0, 0.2, 1) 0ms,transform 200ms cubic-bezier(0.0, 0, 0.2, 1) 0ms',\n  transform: 'translate(0, 1.5px) scale(0.75)',\n  transformOrigin: 'top left',\n  top: 0,\n  left: 0,\n  marginTop: \"-8px\"\n};\n\nvar toolbarStyles = function toolbarStyles(theme) {\n  return {\n    root: {\n      paddingRight: theme.spacing.unit\n    },\n    highlight: theme.palette.type === 'light' ? {\n      color: theme.palette.secondary.main,\n      backgroundColor: lighten(theme.palette.primary.light, 0.85)\n    } : {\n      color: theme.palette.text.primary,\n      backgroundColor: theme.palette.secondary.dark\n    },\n    spacer: {\n      flex: '1 1 100%'\n    },\n    actions: {\n      color: theme.palette.text.secondary\n    },\n    title: {\n      flex: '0 0 auto'\n    },\n    margin: {\n      marginRight: '10px'\n    }\n  };\n};\n\nvar SignalIntervalTable = function SignalIntervalTable(props) {\n  var classes = props.classes;\n  return React.createElement(Paper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347\n    },\n    __self: this\n  }, React.createElement(Toolbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    spacing: 24,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    xs: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    label: \"Interval Duration (min)\",\n    required: true,\n    type: \"number\",\n    placeholder: \"Duration\",\n    value: props.createIntervalDuration,\n    className: classes.textField,\n    onChange: props.handleCreateIntervalDurationChange,\n    InputLabelProps: {\n      shrink: true\n    },\n    fullWidth: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351\n    },\n    __self: this\n  })), React.createElement(Grid, {\n    item: true,\n    xs: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    label: \"Interval Value\",\n    required: true,\n    placeholder: \"Value\",\n    value: props.createIntervalValue,\n    className: classes.textField,\n    onChange: props.handleCreateIntervalValueChange,\n    InputLabelProps: {\n      shrink: true\n    },\n    fullWidth: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361\n    },\n    __self: this\n  })), props.needIntervalCreate && props.createIntervalValue !== \"\" && props.createIntervalDuration !== \"\" ? React.createElement(Grid, {\n    item: true,\n    xs: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369\n    },\n    __self: this\n  }, React.createElement(Button, {\n    key: \"btn_create\",\n    variant: \"outlined\",\n    color: \"primary\",\n    size: \"small\",\n    style: {\n      marginTop: 13\n    },\n    onClick: props.handleCreateIntervalClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370\n    },\n    __self: this\n  }, React.createElement(AddIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376\n    },\n    __self: this\n  }), props.createIntervalEditMode ? \"Edit\" : \"Create\")) : null, props.needIntervalCreate && props.createIntervalValue !== \"\" && props.createIntervalDuration !== \"\" ? React.createElement(Grid, {\n    item: true,\n    xs: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380\n    },\n    __self: this\n  }, React.createElement(Button, {\n    key: \"btn_create\",\n    variant: \"outlined\",\n    color: \"secondary\",\n    size: \"small\",\n    style: {\n      marginTop: 13\n    },\n    onClick: props.handleCancelIntervalClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381\n    },\n    __self: this\n  }, React.createElement(AddIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387\n    },\n    __self: this\n  }), \"Cancel\")) : null)), props.intervals.length > 0 ? React.createElement(Table, {\n    className: classes.table,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394\n    },\n    __self: this\n  }, React.createElement(TableHead, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395\n    },\n    __self: this\n  }, React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397\n    },\n    __self: this\n  }, \"Duration\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398\n    },\n    __self: this\n  }, \"Value\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399\n    },\n    __self: this\n  }), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400\n    },\n    __self: this\n  }))), React.createElement(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403\n    },\n    __self: this\n  }, props.intervals.map(function (row, index) {\n    return React.createElement(TableRow, {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405\n      },\n      __self: this\n    }, React.createElement(TableCell, {\n      scope: \"row\",\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406\n      },\n      __self: this\n    }, row.duration), React.createElement(TableCell, {\n      scope: \"row\",\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407\n      },\n      __self: this\n    }, row.value), React.createElement(TableCell, {\n      scope: \"row\",\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408\n      },\n      __self: this\n    }, React.createElement(Button, {\n      size: \"small\",\n      color: \"primary\",\n      onClick: props.handleEditIntervalClick(row, index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409\n      },\n      __self: this\n    }, \" EDIT \")), React.createElement(TableCell, {\n      scope: \"row\",\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411\n      },\n      __self: this\n    }, React.createElement(Button, {\n      size: \"small\",\n      color: \"secondary\",\n      onClick: props.handleRemoveSignalIntervalAtIndex(index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412\n      },\n      __self: this\n    }, \" REMOVE \")));\n  }))) : null);\n};\n\nSignalIntervalTable = withStyles(toolbarStyles)(SignalIntervalTable);\nexport var EventSignalPanel =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EventSignalPanel, _React$Component);\n\n  function EventSignalPanel(props) {\n    var _this;\n\n    _classCallCheck(this, EventSignalPanel);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EventSignalPanel).call(this, props));\n\n    _this.handleSignalNameChange = function (e) {\n      var signal = _this.props.eventSignal;\n      signal.signalName = e.target.value;\n      var availableSignalType = getAvailableSignalType(signal.signalName);\n\n      if (availableSignalType.length === 1) {\n        signal.signalType = availableSignalType[0];\n        var availableUnitType = getAvailableUnitType(signal.signalName, signal.signalType);\n\n        if (availableUnitType.length === 1) {\n          signal.unitType = availableUnitType[0].name;\n        }\n      }\n\n      _this.props.onChange(signal);\n    };\n\n    _this.handleSignalTypeChange = function (e) {\n      var signal = _this.props.eventSignal;\n      signal.signalType = e.target.value;\n\n      _this.props.onChange(signal);\n    };\n\n    _this.handleUnitTypeChange = function (e) {\n      var signal = _this.props.eventSignal;\n      signal.unitType = e.target.value;\n\n      _this.props.onChange(signal);\n    };\n\n    _this.handleRemoveSignalIntervalAtIndex = function (index) {\n      return function () {\n        var signal = _this.props.eventSignal;\n        signal.intervals.splice(index, 1);\n\n        _this.props.onChange(signal);\n      };\n    };\n\n    _this.handleCreateIntervalDurationChange = function (e) {\n      _this.setState({\n        createIntervalDuration: e.target.value\n      });\n    };\n\n    _this.handleCreateIntervalValueChange = function (e) {\n      _this.setState({\n        createIntervalValue: e.target.value\n      });\n    };\n\n    _this.handleCurrentValueChange = function (e) {\n      var signal = _this.props.eventSignal;\n      signal.currentValue = e.target.value;\n\n      _this.props.onChange(signal);\n    };\n\n    _this.handleCreateIntervalClick = function () {\n      var signal = _this.props.eventSignal;\n      var interval = {\n        duration: _this.state.createIntervalDuration,\n        value: _this.state.createIntervalValue\n      };\n\n      if (_this.state.createIntervalEditMode) {\n        signal.intervals[_this.state.createIntervalEditIndex] = interval;\n      } else {\n        signal.intervals.push(interval);\n      }\n\n      _this.props.onChange(signal);\n\n      _this.setState({\n        createIntervalEditMode: false,\n        createIntervalEditIndex: null,\n        createIntervalDuration: \"\",\n        createIntervalValue: \"\"\n      });\n    };\n\n    _this.handleEditIntervalClick = function (interval, index) {\n      return function () {\n        _this.setState({\n          createIntervalEditMode: true,\n          createIntervalDuration: interval.duration,\n          createIntervalValue: interval.value,\n          createIntervalEditIndex: index\n        });\n      };\n    };\n\n    _this.handleCancelIntervalClick = function () {\n      _this.setState({\n        createIntervalEditMode: false,\n        createIntervalEditIndex: null,\n        createIntervalDuration: \"\",\n        createIntervalValue: \"\"\n      });\n    };\n\n    _this.handleNeedIntervalCreateClick = function (e) {\n      if (!e.target.checked) {\n        var signal = _this.props.eventSignal;\n        signal.intervals = [];\n\n        _this.props.onChange(signal);\n      }\n\n      _this.setState({\n        needIntervalCreate: e.target.checked\n      });\n    };\n\n    _this.state = {};\n    _this.state.createIntervalDuration = \"\";\n    _this.state.createIntervalValue = \"\";\n    _this.state.createIntervalEditMode = false;\n    _this.state.createIntervalEditIndex = null;\n    _this.state.needIntervalCreate = false;\n\n    if (props.eventSignal.intervals.length > 0) {\n      _this.state.needIntervalCreate = true;\n    }\n\n    return _this;\n  }\n\n  _createClass(EventSignalPanel, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var newState = {};\n      var stateChanged = false;\n\n      if (nextProps.eventSignal.intervals.length > 0) {\n        newState.needIntervalCreate = true;\n        stateChanged = true;\n      }\n\n      if (stateChanged) {\n        this.setState(newState);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          hasError = _this$props.hasError,\n          eventSignal = _this$props.eventSignal;\n      var signalNameView = [];\n      var s;\n\n      for (var i in signalNameMenuItems) {\n        s = signalNameMenuItems[i];\n        signalNameView.push(React.createElement(MenuItem, {\n          key: \"menu_item_signal_name_\" + s.name,\n          value: s.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 563\n          },\n          __self: this\n        }, s.label));\n      }\n\n      var signalTypeView = [];\n\n      if (eventSignal.signalName !== \"\") {\n        var validSignalType = getAvailableSignalType(eventSignal.signalName);\n\n        for (var j in signalTypeMenuItems) {\n          s = signalTypeMenuItems[j];\n\n          if (validSignalType.includes(s.name)) {\n            signalTypeView.push(React.createElement(MenuItem, {\n              key: \"menu_item_signal_name_\" + s.name,\n              value: s.name,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 574\n              },\n              __self: this\n            }, s.label));\n          }\n        }\n      }\n\n      var unitTypeView = [];\n\n      if (eventSignal.signalType !== \"\") {\n        var validUnitType = getAvailableUnitType(eventSignal.signalName, eventSignal.signalType);\n\n        for (var k in validUnitType) {\n          s = validUnitType[k];\n          unitTypeView.push(React.createElement(MenuItem, {\n            key: \"menu_item_unit_type_\" + s.name,\n            value: s.name,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 587\n            },\n            __self: this\n          }, s.label));\n        }\n      }\n\n      return React.createElement(Grid, {\n        container: true,\n        spacing: 8,\n        justify: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 600\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        spacing: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 604\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 605\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        className: classes.formControl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 606\n        },\n        __self: this\n      }, React.createElement(FormLabel, {\n        style: labelStyle,\n        component: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 607\n        },\n        __self: this\n      }, \"Signal Name\"), React.createElement(Select, {\n        required: true,\n        value: eventSignal.signalName,\n        error: hasError && eventSignal.signalName == \"\",\n        style: {\n          marginTop: 0\n        },\n        onChange: this.handleSignalNameChange,\n        inputProps: {\n          name: 'signal_name_select',\n          id: 'signal_name_select'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 610\n        },\n        __self: this\n      }, signalNameView))), React.createElement(Grid, {\n        item: true,\n        xs: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 622\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        className: classes.formControl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 623\n        },\n        __self: this\n      }, React.createElement(FormLabel, {\n        style: labelStyle,\n        component: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 624\n        },\n        __self: this\n      }, \"Signal Name\"), React.createElement(Select, {\n        required: true,\n        disabled: eventSignal.signalName == \"\",\n        error: hasError && eventSignal.signalType == \"\",\n        value: eventSignal.signalType,\n        style: {\n          marginTop: 0\n        },\n        onChange: this.handleSignalTypeChange,\n        inputProps: {\n          name: 'signal_type_select',\n          id: 'signal_type_select'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 627\n        },\n        __self: this\n      }, signalTypeView))), React.createElement(Grid, {\n        item: true,\n        xs: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 641\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        className: classes.formControl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 642\n        },\n        __self: this\n      }, React.createElement(FormLabel, {\n        style: labelStyle,\n        component: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 643\n        },\n        __self: this\n      }, \"Signal Unit\"), React.createElement(Select, {\n        required: true,\n        disabled: eventSignal.signalName == \"\" || eventSignal.signalType == \"\",\n        value: eventSignal.unitType,\n        style: {\n          marginTop: 0\n        },\n        error: hasError && eventSignal.unitType == \"\",\n        onChange: this.handleUnitTypeChange,\n        inputProps: {\n          name: 'unit_type_select',\n          id: 'unit_type_select'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 646\n        },\n        __self: this\n      }, unitTypeView)))), React.createElement(Grid, {\n        container: true,\n        spacing: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 658\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 659\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"Current Value\",\n        placeholder: \"Current Value\",\n        error: hasError && eventSignal.currentValue == \"\" && eventSignal.intervals.length == 0,\n        value: eventSignal.currentValue,\n        className: classes.textField,\n        onChange: this.handleCurrentValueChange,\n        fullWidth: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 660\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        xs: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 668\n        },\n        __self: this\n      }, React.createElement(FormControlLabel, {\n        control: React.createElement(Checkbox, {\n          checked: this.state.needIntervalCreate,\n          onChange: this.handleNeedIntervalCreateClick,\n          value: \"Intervals\",\n          color: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 671\n          },\n          __self: this\n        }),\n        label: \"Intervals\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 669\n        },\n        __self: this\n      })), this.props.canBeRemoved ? React.createElement(Grid, {\n        item: true,\n        xs: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 681\n        },\n        __self: this\n      }, React.createElement(Button, {\n        key: \"btn_create\",\n        variant: \"outlined\",\n        color: \"secondary\",\n        size: \"small\",\n        className: classes.button,\n        onClick: this.props.onRemove,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 682\n        },\n        __self: this\n      }, React.createElement(AddIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 688\n        },\n        __self: this\n      }), \"Remove\")) : null), this.state.needIntervalCreate ? React.createElement(Grid, {\n        container: true,\n        spacing: 24,\n        style: {\n          marginTop: 20,\n          marginBottom: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 696\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 698\n        },\n        __self: this\n      }, React.createElement(SignalIntervalTable, {\n        intervals: eventSignal.intervals,\n        handleRemoveSignalIntervalAtIndex: this.handleRemoveSignalIntervalAtIndex,\n        needIntervalCreate: this.state.needIntervalCreate,\n        createIntervalValue: this.state.createIntervalValue,\n        createIntervalDuration: this.state.createIntervalDuration,\n        createIntervalEditMode: this.state.createIntervalEditMode,\n        handleCreateIntervalDurationChange: this.handleCreateIntervalDurationChange,\n        handleCreateIntervalValueChange: this.handleCreateIntervalValueChange,\n        handleCreateIntervalClick: this.handleCreateIntervalClick,\n        handleEditIntervalClick: this.handleEditIntervalClick,\n        handleCancelIntervalClick: this.handleCancelIntervalClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 699\n        },\n        __self: this\n      }))) : null);\n    }\n  }]);\n\n  return EventSignalPanel;\n}(React.Component);\nexport default EventSignalPanel;","map":{"version":3,"sources":["/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/src/components/common/EventSignalPanel.js"],"names":["React","withStyles","FormControl","FormLabel","TextField","Grid","MenuItem","Select","Table","TableBody","TableCell","TableHead","TableRow","Paper","AddIcon","Button","FormControlLabel","Checkbox","Toolbar","lighten","signalTypeMenuItems","name","label","description","signalNameMenuItems","unitMenuItems","currencyPerKwh","energy","power","none","validSignalCombination","signalName","signalType","unit","getAvailableSignalType","validSignalType","i","combination","push","getAvailableUnitType","validUnitType","concat","labelStyle","boxSizing","color","fontSize","fontWeight","lineHeight","transition","transform","transformOrigin","top","left","marginTop","toolbarStyles","theme","root","paddingRight","spacing","highlight","palette","type","secondary","main","backgroundColor","primary","light","text","dark","spacer","flex","actions","title","margin","marginRight","SignalIntervalTable","props","classes","createIntervalDuration","textField","handleCreateIntervalDurationChange","shrink","createIntervalValue","handleCreateIntervalValueChange","needIntervalCreate","handleCreateIntervalClick","createIntervalEditMode","handleCancelIntervalClick","intervals","length","table","map","row","index","duration","value","handleEditIntervalClick","handleRemoveSignalIntervalAtIndex","EventSignalPanel","handleSignalNameChange","e","signal","eventSignal","target","availableSignalType","availableUnitType","unitType","onChange","handleSignalTypeChange","handleUnitTypeChange","splice","setState","handleCurrentValueChange","currentValue","interval","state","createIntervalEditIndex","handleNeedIntervalCreateClick","checked","nextProps","newState","stateChanged","hasError","signalNameView","s","signalTypeView","j","includes","unitTypeView","k","formControl","id","canBeRemoved","button","onRemove","marginBottom","Component"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { withStyles} from '@material-ui/core/styles';\n\n\n\n\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\n\n\nimport TextField from '@material-ui/core/TextField';\n\n\n\nimport Grid from '@material-ui/core/Grid';\n\n\n\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport Select from '@material-ui/core/Select';\n\n\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\n\nimport AddIcon from '@material-ui/icons/Add';\n\nimport Button from '@material-ui/core/Button';\n\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { lighten } from '@material-ui/core/styles/colorManipulator';\n\n\n\n\n\n\nconst signalTypeMenuItems = [{\n    name: \"delta\",\n    label: \"Delta\",\n    description: \"Signal indicates the amount to change from what one would have used without the signal\",\n  }, {\n    name: \"level\",\n    label: \"Level\",\n    description: \"Signal indicates a program level\" \n  }, {\n    name: \"multiplier\",\n    label: \"Multiplier\",\n    description: \"Signal indicates a multiplier applied to the current rate of delivery or usage from what one would have used without the signal\" \n  } , {\n    name: \"price\",\n    label: \"Price\",\n    description: \"Signal indicates the price\" \n  } , {\n    name: \"priceMultiplier\",\n    label: \"Price Multiplier\",\n    description: \"Signal indicates the price multiplier. Extended price is the computed price value multiplied by the number of units\" \n  } , {\n    name: \"priceRelative\",\n    label: \"Price Relative\",\n    description: \"Signal indicates the relative price\" \n  } , {\n    name: \"setpoint\",\n    label: \"Set Point\",\n    description: \"Signal indicates a target amount of units\" \n  } , {\n    name: \"x-loadControlCapacity\",\n    label: \"Load Control Capacity\",\n    description: \"This is an instruction for the load controller to operate at a level that is some percentage of its maximum load consumption capacity. This can be mapped to specific load controllers to do things like duty cycling. Note that 1.0 refers to 100% consumption. In the case of simple ON/OFF type devices then 0 = OFF and 1 = ON\" \n  } , {\n    name: \"x-loadControlLevelOffset\",\n    label: \"Load Control Level Offset\",\n    description: \"Discrete integer levels that are relative to normal operations where 0 is normal operations\" \n  }  , {\n    name: \"x-loadControlPercentOffset\",\n    label: \"Load Control Percent Offset\",\n    description: \"Percentage change from normal load control operations\" \n  } , {\n    name: \"x-loadControlSetPoint\",\n    label: \"Load Control Set Point\",\n    description: \"Load controller set points\" \n  } \n]\n\nconst signalNameMenuItems = [{\n    name: \"BID_ENERGY\",\n    label: \"Bid Energy\",\n    description: \"This is the amount of energy from a resource that was bid into a program\" \n  },{\n    name: \"BID_LOAD\",\n    label: \"Bid Load\",\n    description: \"This is the amount of load that was bid by a resource into a program\" \n  }, {\n    name: \"BID_PRICE\",\n    label: \"Bid Price\",\n    description: \"This is the price that was bid by the resource\"\n\n  }, {\n    name: \"CHARGE_STATE\",\n    label: \"Charge State\",\n    description: \"State of energy storage resource\"\n\n  }, {\n    name: \"DEMAND_CHARGE\",\n    label: \"Demand Charge\",\n    description: \"This is the demand charge\"\n\n  }, {\n    name: \"ELECTRICITY_PRICE\",\n    label: \"Electricity Price\",\n    description: \"This is the cost of electricity\"\n\n  }, {\n    name: \"ENERGY_PRICE\",\n    label: \"Energy Price\",\n    description: \"This is the cost of energy\"\n\n  }, {\n    name: \"LOAD_CONTROL\",\n    label: \"Load Control\",\n    description: \"Set load output to relative values\"\n\n  }, {\n    name: \"LOAD_DISPATCH\",\n    label: \"Load Dispatch\",\n    description: \"This is used to dispatch load\"\n\n  }, {\n    name: \"SIMPLE\",\n    label: \"Simple\",\n    description: \"Simple levels (OpenADR 2.0a compliant) \"\n\n  }, {\n    name: \"SIMPLE_DEPRECATED\",\n    label: \"Simple (deprecated)\",\n    description: \"depreciated - for backwards compatibility with A profile\"\n\n  }\n];\n\n\n\nconst unitMenuItems = {\n\n  currencyPerKwh: [{name: \"euro_per_kwh\",\n    label: \"â‚¬ / kWh\",\n    description: \"Euro per kWh\"\n  }, {\n    name: \"dollar_per_kwh\",\n    label: \"$ / kWh\",\n    description: \"Euro per kWh\"\n  }],\n  energy: [{\n    name: \"kwh\",\n    label: \"kWh\",\n    description: \"kWh\"\n  }],\n  power: [{\n    name: \"kw\",\n    label: \"kW\",\n    description: \"kW\"\n  }],\n  none:[{\n    name: \"none\",\n    label: \"None\",\n    description: \"None\"\n  }]\n}\n\nconst validSignalCombination = [{\n  signalName: \"SIMPLE\",\n  signalType: \"level\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"ELECTRICITY_PRICE\",\n  signalType: \"price\",\n  unit: unitMenuItems.currencyPerKwh\n} , {\n  signalName: \"ELECTRICITY_PRICE\",\n  signalType: \"priceRelative\",\n  unit: unitMenuItems.currencyPerKwh\n} , {\n  signalName: \"ELECTRICITY_PRICE\",\n  signalType: \"priceMultiplier\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"ENERGY_PRICE\",\n  signalType: \"priceRelative\",\n  unit: unitMenuItems.currencyPerKwh\n}, {\n  signalName: \"ENERGY_PRICE\",\n  signalType: \"priceMultiplier\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"ENERGY_PRICE\",\n  signalType: \"price\",\n  unit: unitMenuItems.currencyPerKwh\n}, {\n  signalName: \"DEMAND_CHARGE\",\n  signalType: \"priceRelative\",\n  unit: unitMenuItems.currencyPerKwh\n}, {\n  signalName: \"DEMAND_CHARGE\",\n  signalType: \"priceMultiplier\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"DEMAND_CHARGE\",\n  signalType: \"price\",\n  unit: unitMenuItems.currencyPerKwh\n}, {\n  signalName: \"BID_PRICE\",\n  signalType: \"price\",\n  unit: unitMenuItems.currencyPerKwh\n}, {\n  signalName: \"BID_LOAD\",\n  signalType: \"setpoint\",\n  unit: unitMenuItems.power\n}, {\n  signalName: \"BID_ENERGY\",\n  signalType: \"setpoint\",\n  unit: unitMenuItems.energy\n}, {\n  signalName: \"CHARGE_STATE\",\n  signalType: \"setpoint\",\n  unit: unitMenuItems.energy\n}, {\n  signalName: \"CHARGE_STATE\",\n  signalType: \"delta\",\n  unit: unitMenuItems.energy\n}, {\n  signalName: \"CHARGE_STATE\",\n  signalType: \"multiplier\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"LOAD_DISPATCH\",\n  signalType: \"setpoint\",\n  unit: unitMenuItems.power\n}, {\n  signalName: \"LOAD_DISPATCH\",\n  signalType: \"delta\",\n  unit: unitMenuItems.power\n}, {\n  signalName: \"LOAD_DISPATCH\",\n  signalType: \"multiplier\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"LOAD_DISPATCH\",\n  signalType: \"level\",\n  unit: unitMenuItems.power\n}, {\n  signalName: \"LOAD_CONTROL\",\n  signalType: \"x-loadControlCapacity\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"LOAD_CONTROL\",\n  signalType: \"x-loadControlPercentOffset\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"LOAD_CONTROL\",\n  signalType: \"x-loadControlSetPoint\",\n  unit: unitMenuItems.none\n}, {\n  signalName: \"LOAD_CONTROL\",\n  signalType: \"x-loadControlLevelOffset\",\n  unit: unitMenuItems.none\n}];\n\nvar getAvailableSignalType = (signalName) => {\n  var validSignalType = [];\n  for(var i in validSignalCombination) { \n    var combination = validSignalCombination[i];\n    if(combination.signalName === signalName){\n      validSignalType.push(combination.signalType)\n    }\n  }\n  return validSignalType;\n}\n\nvar getAvailableUnitType = (signalName, signalType) => {\n  var validUnitType = [];\n  for(var i in validSignalCombination) { \n    var combination = validSignalCombination[i];\n    if(combination.signalName === signalName && combination.signalType === signalType){\n      validUnitType = validUnitType.concat(combination.unit);\n      \n    }\n  }\n  return validUnitType;\n}\n\nconst labelStyle = {\n\n  boxSizing: 'border-box',\n  color: 'rgba(0, 0, 0, 0.54)',\n  fontSize: '1rem',\n  fontWeight: 400,\n\n  lineHeight: 1,\n  transition: 'color 200ms cubic-bezier(0.0, 0, 0.2, 1) 0ms,transform 200ms cubic-bezier(0.0, 0, 0.2, 1) 0ms',\n  transform: 'translate(0, 1.5px) scale(0.75)',\n  transformOrigin: 'top left',\n  top: 0,\n  left: 0,\n  marginTop: \"-8px\"\n}\n\nconst toolbarStyles = theme => ({\n  root: {\n    paddingRight: theme.spacing.unit,\n  },\n  highlight:\n    theme.palette.type === 'light'\n      ? {\n          color: theme.palette.secondary.main,\n          backgroundColor: lighten(theme.palette.primary.light, 0.85),\n        }\n      : {\n          color: theme.palette.text.primary,\n          backgroundColor: theme.palette.secondary.dark,\n        },\n  spacer: {\n    flex: '1 1 100%',\n  },\n  actions: {\n    color: theme.palette.text.secondary,\n  },\n  title: {\n    flex: '0 0 auto',\n  },\n  margin: {\n    marginRight: '10px',\n  },\n});\n\nvar SignalIntervalTable = (props) => {\n  const {classes} = props;\n  return (\n    <Paper >\n      <Toolbar>\n        <Grid container spacing={ 24 }>\n          <Grid item xs={ 4 }>\n            <TextField label=\"Interval Duration (min)\" required\n                        type=\"number\"\n                       placeholder=\"Duration\"\n                       value={ props.createIntervalDuration }\n                       className={ classes.textField }\n                       onChange={ props.handleCreateIntervalDurationChange }\n                       InputLabelProps={{ shrink: true }}\n                       fullWidth={ true }/>\n          </Grid> \n          <Grid item xs={ 4 }>\n            <TextField label=\"Interval Value\" required\n                       placeholder=\"Value\"\n                       value={ props.createIntervalValue }\n                       className={ classes.textField }\n                       onChange={ props.handleCreateIntervalValueChange }\n                       InputLabelProps={{ shrink: true }}\n                       fullWidth={ true } />\n          </Grid> \n          {(props.needIntervalCreate && props.createIntervalValue !== \"\" && props.createIntervalDuration !== \"\") ? <Grid item xs={ 2 }>\n            <Button key=\"btn_create\"\n                            variant=\"outlined\"\n                            color=\"primary\"\n                            size=\"small\"\n                            style={ { marginTop: 13 } }\n                            onClick={ props.handleCreateIntervalClick }>\n                      <AddIcon />{(props.createIntervalEditMode ) ? \"Edit\" : \"Create\"}\n                    </Button>\n          </Grid>: null}\n\n          {(props.needIntervalCreate && props.createIntervalValue !== \"\" && props.createIntervalDuration !== \"\") ? <Grid item xs={ 2 }>\n            <Button key=\"btn_create\"\n                            variant=\"outlined\"\n                            color=\"secondary\"\n                            size=\"small\"\n                            style={ { marginTop: 13 } }\n                            onClick={ props.handleCancelIntervalClick }>\n                      <AddIcon />Cancel\n                    </Button>\n          </Grid>: null}\n          \n          \n      </Grid>\n      </Toolbar>\n      {(props.intervals.length > 0) ? <Table className={classes.table}>\n        <TableHead>\n          <TableRow>\n            <TableCell align=\"right\">Duration</TableCell>\n            <TableCell align=\"right\">Value</TableCell>\n            <TableCell align=\"right\"></TableCell>\n            <TableCell align=\"right\"></TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {props.intervals.map( (row, index) => (\n            <TableRow key={index}>\n              <TableCell scope=\"row\" align=\"right\">{row.duration}</TableCell>\n              <TableCell scope=\"row\" align=\"right\">{row.value}</TableCell>\n              <TableCell scope=\"row\" align=\"right\">\n                  <Button size=\"small\" color=\"primary\" onClick={props.handleEditIntervalClick(row, index)}> EDIT </Button>\n              </TableCell>\n              <TableCell scope=\"row\" align=\"right\">\n                  <Button size=\"small\" color=\"secondary\" onClick={props.handleRemoveSignalIntervalAtIndex(index)}> REMOVE </Button>\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table> : null}\n      \n    </Paper>\n  );\n}\n\nSignalIntervalTable = withStyles(toolbarStyles)(SignalIntervalTable);\n\n\nexport class EventSignalPanel extends React.Component {\n\n  constructor( props ) {\n    super( props );\n    this.state = {};\n    this.state.createIntervalDuration = \"\";\n    this.state.createIntervalValue = \"\";\n    this.state.createIntervalEditMode = false;\n    this.state.createIntervalEditIndex = null;\n    this.state.needIntervalCreate = false;\n   \n\n    if(props.eventSignal.intervals.length > 0) {\n      this.state.needIntervalCreate = true;\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    var newState = {};\n    var stateChanged = false;\n\n    if(nextProps.eventSignal.intervals.length > 0) {\n      newState.needIntervalCreate = true;\n      stateChanged = true;\n    }\n\n    if(stateChanged){\n      this.setState(newState);\n    }\n  }\n\n  handleSignalNameChange = (e) => {\n    let signal = this.props.eventSignal;\n    signal.signalName = e.target.value;\n    \n\n    var availableSignalType = getAvailableSignalType(signal.signalName);\n    if(availableSignalType.length === 1) {\n      signal.signalType = availableSignalType[0];\n      var availableUnitType = getAvailableUnitType(signal.signalName, signal.signalType);\n      if(availableUnitType.length === 1) {\n        signal.unitType = availableUnitType[0].name;\n      }\n    }\n\n    this.props.onChange(signal);\n  }\n\n  handleSignalTypeChange = (e) => {\n    let signal = this.props.eventSignal;\n    signal.signalType = e.target.value;\n    this.props.onChange(signal);\n  }\n\n  handleUnitTypeChange = (e) => {\n    let signal = this.props.eventSignal;\n    signal.unitType = e.target.value;\n    this.props.onChange(signal);\n  }\n\n  handleRemoveSignalIntervalAtIndex = (index) => () => {\n    let signal = this.props.eventSignal;\n    signal.intervals.splice(index,1);\n    this.props.onChange(signal);\n  }\n\n  handleCreateIntervalDurationChange = (e) => {\n    this.setState({createIntervalDuration: e.target.value});\n  }\n\n  handleCreateIntervalValueChange = (e) => {\n    this.setState({createIntervalValue: e.target.value});\n  }\n\n  handleCurrentValueChange = (e) => {\n    let signal = this.props.eventSignal;\n    signal.currentValue = e.target.value;\n    this.props.onChange(signal);\n  }\n  \n  handleCreateIntervalClick = () => {\n    let signal = this.props.eventSignal;\n    let interval = {\n        duration: this.state.createIntervalDuration,\n        value: this.state.createIntervalValue\n      }\n    if(this.state.createIntervalEditMode){\n      signal.intervals[this.state.createIntervalEditIndex] = interval;\n    }\n    else {\n      signal.intervals.push(interval);\n    }\n    \n    this.props.onChange(signal);\n    this.setState({\n      createIntervalEditMode: false,\n      createIntervalEditIndex: null,\n      createIntervalDuration: \"\",\n      createIntervalValue: \"\"\n    })\n  }\n\n  handleEditIntervalClick =(interval, index) => () => {\n    this.setState({\n      createIntervalEditMode: true,\n      createIntervalDuration: interval.duration,\n      createIntervalValue: interval.value,\n      createIntervalEditIndex: index\n    })\n  }\n\n  handleCancelIntervalClick = () => {\n    this.setState({\n      createIntervalEditMode: false,\n      createIntervalEditIndex: null,\n      createIntervalDuration: \"\",\n      createIntervalValue: \"\"\n    })\n  }\n\n  handleNeedIntervalCreateClick = (e) => {\n    if(!e.target.checked) {\n      let signal = this.props.eventSignal;\n      signal.intervals = [];\n      this.props.onChange(signal);\n    }\n    this.setState({needIntervalCreate: e.target.checked});\n  }\n\n\n  render() {\n    const {classes, hasError, eventSignal} = this.props;\n\n    var signalNameView = [];\n    var s;\n    for(var i in signalNameMenuItems){\n      s  = signalNameMenuItems[i];\n      signalNameView.push(<MenuItem key={\"menu_item_signal_name_\"+s.name} value={s.name}>\n                       {s.label}\n                       </MenuItem> )\n    }\n\n    var signalTypeView = [];\n    if(eventSignal.signalName !== \"\") {\n      var validSignalType = getAvailableSignalType(eventSignal.signalName);\n      for(var j in signalTypeMenuItems){\n        s  = signalTypeMenuItems[j];\n        if(validSignalType.includes(s.name) ){\n          signalTypeView.push(<MenuItem key={\"menu_item_signal_name_\"+s.name} value={s.name}>\n                         {s.label}\n                         </MenuItem> );\n        }\n        \n      }\n    }\n\n    var unitTypeView = [];\n     if(eventSignal.signalType !== \"\") {\n      var validUnitType = getAvailableUnitType(eventSignal.signalName, eventSignal.signalType);\n      for(var k in validUnitType){\n        s = validUnitType[k];\n        unitTypeView.push(<MenuItem key={\"menu_item_unit_type_\"+s.name} value={s.name}>\n             {s.label}\n             </MenuItem> );\n        \n      }\n    }\n\n    \n    \n\n\n\n    return (\n    <Grid container\n          spacing={ 8 }\n          justify=\"center\">\n\n      <Grid container spacing={ 24 }>\n        <Grid item xs={ 4 }>\n          <FormControl className={ classes.formControl }>\n                <FormLabel style={ labelStyle } component=\"label\">\n                  Signal Name\n                </FormLabel>\n                <Select required value={ eventSignal.signalName} error={ hasError && eventSignal.signalName == \"\"}\n                              style={ { marginTop: 0 } }\n\n                               onChange={this.handleSignalNameChange}\n                   \n                              inputProps={ { name: 'signal_name_select', id: 'signal_name_select', } }\n                              >\n                      {signalNameView}\n                </Select>\n              </FormControl>\n\n        </Grid> \n        <Grid item xs={ 4 }>\n          <FormControl className={ classes.formControl }>\n                <FormLabel style={ labelStyle } component=\"label\">\n                  Signal Name\n                </FormLabel>\n                <Select required disabled={eventSignal.signalName == \"\"} \n                        error={ hasError && eventSignal.signalType == \"\"}\n                        value={ eventSignal.signalType}\n                              style={ { marginTop: 0 } }\n\n                               onChange={this.handleSignalTypeChange}\n                   \n                              inputProps={ { name: 'signal_type_select', id: 'signal_type_select', } }\n                              >\n                      {signalTypeView}\n                </Select>\n              </FormControl>\n\n        </Grid> \n        <Grid item xs={ 4 }>\n          <FormControl className={ classes.formControl }>\n                <FormLabel style={ labelStyle } component=\"label\">\n                  Signal Unit\n                </FormLabel>\n                <Select required disabled={eventSignal.signalName == \"\" || eventSignal.signalType == \"\"} value={ eventSignal.unitType}\n                              style={ { marginTop: 0 } }\n                            error={ hasError && eventSignal.unitType == \"\"}\n                               onChange={this.handleUnitTypeChange}\n                   \n                              inputProps={ { name: 'unit_type_select', id: 'unit_type_select', } }\n                              >\n                      {unitTypeView}\n                </Select>\n              </FormControl>\n        </Grid>\n      </Grid>\n      <Grid container spacing={ 24 }>\n        <Grid item xs={ 4 }>\n            <TextField label=\"Current Value\"\n                       placeholder=\"Current Value\"\n                       error={ hasError && eventSignal.currentValue == \"\" && eventSignal.intervals.length == 0}\n                       value={ eventSignal.currentValue }\n                       className={ classes.textField }\n                       onChange={ this.handleCurrentValueChange }\n                       fullWidth={ true } />\n          </Grid> \n        <Grid item xs={4} >\n           <FormControlLabel\n          control={\n            <Checkbox\n              checked={this.state.needIntervalCreate}\n              onChange={this.handleNeedIntervalCreateClick}\n              value=\"Intervals\"\n              color=\"primary\"\n            />\n          }\n          label=\"Intervals\"\n        />\n        </Grid>\n        {(this.props.canBeRemoved) ? <Grid item xs={4} >\n           <Button key=\"btn_create\"\n                            variant=\"outlined\"\n                            color=\"secondary\"\n                            size=\"small\"\n                            className={ classes.button }\n                            onClick={ this.props.onRemove }>\n                      <AddIcon />Remove\n                    </Button>\n        </Grid>: null}\n        \n        \n      </Grid>\n\n      \n      {(this.state.needIntervalCreate) ? <Grid container spacing={ 24 }\n         style={ { marginTop: 20 , marginBottom:10 } }>\n        <Grid item xs={ 12 }>\n          <SignalIntervalTable intervals={eventSignal.intervals} \n          handleRemoveSignalIntervalAtIndex={this.handleRemoveSignalIntervalAtIndex}\n          needIntervalCreate={this.state.needIntervalCreate}\n          createIntervalValue={this.state.createIntervalValue}\n          createIntervalDuration={this.state.createIntervalDuration}\n          createIntervalEditMode={this.state.createIntervalEditMode}\n          handleCreateIntervalDurationChange={this.handleCreateIntervalDurationChange}\n          handleCreateIntervalValueChange={this.handleCreateIntervalValueChange}\n          handleCreateIntervalClick={this.handleCreateIntervalClick}\n          handleEditIntervalClick={this.handleEditIntervalClick}\n          handleCancelIntervalClick={this.handleCancelIntervalClick}\n          />\n        </Grid> \n      </Grid>: null}\n      \n\n    </Grid>\n    );\n  }\n}\n\nexport default EventSignalPanel;\n"]},"metadata":{},"sourceType":"module"}