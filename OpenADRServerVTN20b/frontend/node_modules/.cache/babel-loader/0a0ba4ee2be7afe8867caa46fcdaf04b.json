{"ast":null,"code":"import _classCallCheck from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/src/components/VenDetail/VenDetailReport.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles, MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport { VtnConfigurationVenCard, VtnConfigurationMarketContextCard, VtnConfigurationGroupCard } from '../common/VtnConfigurationCard';\nimport { MarketContextSelectDialog, GroupSelectDialog } from '../common/VtnconfigurationDialog';\nimport Input from '@material-ui/core/Input';\nimport InputBase from '@material-ui/core/InputBase';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport TextField from '@material-ui/core/TextField';\nimport FormControl from '@material-ui/core/FormControl';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport IconButton from '@material-ui/core/IconButton';\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\nimport ChipInput from 'material-ui-chip-input';\nimport Button from '@material-ui/core/Button';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport SearchIcon from '@material-ui/icons/Search';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport DoneIcon from '@material-ui/icons/Done';\nimport CloseIcon from '@material-ui/icons/Close';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport VenDetailHeader from './VenDetailHeader';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { history } from '../../store/configureStore';\nimport { iCalDurationInSeconds, formatTimestamp } from '../../utils/time';\nimport { isActionReport, isHistoryReport, isTelemetryReport } from '../../utils/venReport';\n\nvar VenAvailableReportTable = function VenAvailableReportTable(props) {\n  var classes = props.classes,\n      availableReport = props.availableReport,\n      ven = props.ven;\n\n  var getActionLabel = function getActionLabel(report) {\n    switch (report.reportName) {\n      case \"METADATA_HISTORY_USAGE\":\n        return \"Request\";\n\n      case \"METADATA_TELEMETRY_USAGE\":\n        return \"Subscribe\";\n\n      default:\n        return \"Request\";\n    }\n  };\n\n  var getReportBehavior = function getReportBehavior(report) {\n    var behavior = \"Unknown\";\n\n    if (isActionReport(report)) {\n      behavior = \"Action\";\n    } else if (isHistoryReport(report)) {\n      behavior = \"History\";\n    } else if (isTelemetryReport(report)) {\n      behavior = \"Telemetry\";\n    }\n\n    return behavior;\n  };\n\n  var getFormatedCreatedDatetime = function getFormatedCreatedDatetime(report) {\n    var format = formatTimestamp(report.createdDatetime);\n    return React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, format.date, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), format.time, \" \", format.tz);\n  };\n\n  var onClick = function onClick(reportSpecifierId) {\n    return function (event) {\n      return props.handleViewReportDetail(reportSpecifierId);\n    };\n  };\n\n  return React.createElement(Paper, {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(Table, {\n    className: classes.table,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(TableHead, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"Report Behavior\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, \"Specifier ID\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"Created\", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }), \"Date/Time\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"Report Name\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }))), React.createElement(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, availableReport.map(function (row) {\n    return React.createElement(TableRow, {\n      key: row.id,\n      hover: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(TableCell, {\n      scope: \"row\",\n      onClick: onClick(row.reportSpecifierId),\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, getReportBehavior(row)), React.createElement(TableCell, {\n      scope: \"row\",\n      onClick: onClick(row.reportSpecifierId),\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, row.reportSpecifierId), React.createElement(TableCell, {\n      scope: \"row\",\n      onClick: onClick(row.reportSpecifierId),\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, getFormatedCreatedDatetime(row)), React.createElement(TableCell, {\n      scope: \"row\",\n      onClick: onClick(row.reportSpecifierId),\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, row.reportName), React.createElement(TableCell, {\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(Button, {\n      size: \"small\",\n      color: \"primary\",\n      onClick: function (reportSpecifierId) {\n        return function () {\n          props.handleCreateRequestClick(reportSpecifierId);\n        };\n      }(row.reportSpecifierId),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, getActionLabel(row))));\n  }))));\n};\n\nvar VenRequestedReportTable = function VenRequestedReportTable(props) {\n  var classes = props.classes,\n      requestedReport = props.requestedReport,\n      ven = props.ven,\n      handleDeleteRequestClick = props.handleDeleteRequestClick;\n\n  var getActionLabel = function getActionLabel(request) {\n    if (request.end != null || request.start != null) {\n      return \"DELETE\";\n    } else if (iCalDurationInSeconds(request.granularity) == 0 || iCalDurationInSeconds(request.reportBackDuration) == 0) {\n      return \"DELETE\";\n    } else if (iCalDurationInSeconds(request.granularity) != 0 && iCalDurationInSeconds(request.reportBackDuration) != 0) {\n      return \"UNSUBSCRIBE\";\n    }\n  };\n\n  var getFormatedCreatedDatetime = function getFormatedCreatedDatetime(report) {\n    var format = formatTimestamp(report.createdDatetime);\n    return React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, format.date, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }), format.time, \" \", format.tz);\n  };\n\n  var groupByReportRequestId = {};\n\n  for (var i in requestedReport) {\n    var reportRequestId = requestedReport[i].reportRequestId;\n    var group = groupByReportRequestId[reportRequestId];\n\n    if (group == null) {\n      group = {};\n      group.reportRequestId = requestedReport[i].reportRequestId;\n      group.reportSpecifierId = requestedReport[i].reportSpecifierId;\n      group.createdDatetime = requestedReport[i].createdDatetime;\n      group.start = requestedReport[i].createdDatetime;\n      group.duration = requestedReport[i].duration;\n      group.granularity = requestedReport[i].granularity;\n      group.reportBackDuration = requestedReport[i].reportBackDuration;\n      group.request = [];\n    }\n\n    group.request.push(requestedReport[i]);\n    groupByReportRequestId[reportRequestId] = group;\n  }\n\n  var req = Object.values(groupByReportRequestId);\n\n  var onClick = function onClick(reportSpecifierId, reportRequestId) {\n    return function (event) {\n      return props.handleViewReportRequestDetail(reportSpecifierId, reportRequestId);\n    };\n  };\n\n  return React.createElement(Paper, {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, React.createElement(Table, {\n    className: classes.table,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, React.createElement(TableHead, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }, \"report request ID\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, \"Specifier ID\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, \"# rIDs\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, \"Created\", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }), \"Date/Time\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }))), React.createElement(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, req.map(function (row) {\n    return React.createElement(TableRow, {\n      key: row.reportRequestId,\n      hover: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(TableCell, {\n      scope: \"row\",\n      onClick: onClick(row.reportSpecifierId, row.reportRequestId),\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, row.reportRequestId), React.createElement(TableCell, {\n      scope: \"row\",\n      onClick: onClick(row.reportSpecifierId, row.reportRequestId),\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, row.reportSpecifierId), React.createElement(TableCell, {\n      scope: \"row\",\n      onClick: onClick(row.reportSpecifierId, row.reportRequestId),\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, row.request.length), React.createElement(TableCell, {\n      scope: \"row\",\n      onClick: onClick(row.reportSpecifierId, row.reportRequestId),\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, getFormatedCreatedDatetime(row)), React.createElement(TableCell, {\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(Button, {\n      size: \"small\",\n      color: \"secondary\",\n      onClick: function (reportRequestId) {\n        return function () {\n          handleDeleteRequestClick(reportRequestId);\n        };\n      }(row.reportRequestId),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \" \", getActionLabel(row), \" \")));\n  }))));\n};\n\nexport var VenDetailReport =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(VenDetailReport, _React$Component);\n\n  function VenDetailReport(props) {\n    var _this;\n\n    _classCallCheck(this, VenDetailReport);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(VenDetailReport).call(this, props));\n\n    _this.handleRequestRegisterReportClick = function () {\n      _this.props.requestRegisterReport(_this.props.ven.username);\n    };\n\n    _this.handleSendRegisterReportClick = function () {\n      _this.props.sendRegisterReport(_this.props.ven.username);\n    };\n\n    _this.handleCreateRequestClick = function (reportSpecifierId) {\n      history.push(\"/ven/detail/\" + _this.props.ven.username + \"/reports/\" + reportSpecifierId + \"/create\");\n    };\n\n    _this.handleDeleteRequestClick = function (reportRequestId) {\n      _this.props.cancelRequestReportSubscription(_this.props.ven.username, reportRequestId);\n    };\n\n    _this.handleViewReportDetail = function (reportSpecifierId) {\n      history.push(\"/ven/detail/\" + _this.props.ven.username + \"/reports/\" + reportSpecifierId);\n    };\n\n    _this.handleViewReportRequestDetail = function (reportSpecifierId, reportRequestId) {\n      history.push(\"/ven/detail/\" + _this.props.ven.username + \"/reports/\" + reportSpecifierId + \"/requests/\" + reportRequestId);\n    };\n\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(VenDetailReport, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          ven = _this$props.ven,\n          availableReport = _this$props.availableReport,\n          requestedReport = _this$props.requestedReport,\n          cancelRequestReportSubscription = _this$props.cancelRequestReportSubscription;\n      return React.createElement(\"div\", {\n        className: classes.root,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, React.createElement(VenDetailHeader, {\n        classes: classes,\n        ven: ven,\n        actions: [React.createElement(Grid, {\n          key: \"report_action_first_row\",\n          container: true,\n          spacing: 12,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 255\n          },\n          __self: this\n        }, React.createElement(Grid, {\n          item: true,\n          xs: 6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 256\n          },\n          __self: this\n        }, React.createElement(Button, {\n          key: \"btn_create\",\n          style: {\n            marginTop: 15\n          },\n          variant: \"outlined\",\n          color: \"primary\",\n          fullWidth: true,\n          size: \"small\",\n          onClick: this.handleRequestRegisterReportClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257\n          },\n          __self: this\n        }, React.createElement(CloudDownloadIcon, {\n          style: {\n            marginRight: 15\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264\n          },\n          __self: this\n        }), \" REQUIRE REPORTS\")), React.createElement(Grid, {\n          item: true,\n          xs: 6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 267\n          },\n          __self: this\n        }, React.createElement(Button, {\n          key: \"btn_create\",\n          style: {\n            marginTop: 15\n          },\n          variant: \"outlined\",\n          color: \"primary\",\n          fullWidth: true,\n          size: \"small\",\n          onClick: this.handleSendRegisterReportClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 268\n          },\n          __self: this\n        }, React.createElement(CloudDownloadIcon, {\n          style: {\n            marginRight: 15\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 275\n          },\n          __self: this\n        }), \" SEND REQUESTS\")), React.createElement(Grid, {\n          item: true,\n          xs: 6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278\n          },\n          __self: this\n        }, React.createElement(Button, {\n          key: \"btn_create\",\n          style: {\n            marginTop: 15\n          },\n          variant: \"outlined\",\n          color: \"secondary\",\n          fullWidth: true,\n          size: \"small\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 279\n          },\n          __self: this\n        }, React.createElement(RemoveIcon, {\n          style: {\n            marginRight: 15\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285\n          },\n          __self: this\n        }), \" CLEAN REQUESTS\")), React.createElement(Grid, {\n          item: true,\n          xs: 6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 288\n          },\n          __self: this\n        }, React.createElement(Button, {\n          key: \"btn_create\",\n          style: {\n            marginTop: 15\n          },\n          variant: \"outlined\",\n          color: \"secondary\",\n          fullWidth: true,\n          size: \"small\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289\n          },\n          __self: this\n        }, React.createElement(RemoveIcon, {\n          style: {\n            marginRight: 15\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 295\n          },\n          __self: this\n        }), \" CLEAN REPORTS\")))],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }), React.createElement(Divider, {\n        style: {\n          marginBottom: '30px',\n          marginTop: '20px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }), React.createElement(VenAvailableReportTable, {\n        ven: ven,\n        availableReport: availableReport,\n        classes: classes,\n        handleViewReportDetail: this.handleViewReportDetail,\n        handleCreateRequestClick: this.handleCreateRequestClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }), React.createElement(Divider, {\n        style: {\n          marginBottom: '30px',\n          marginTop: '20px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }), React.createElement(Typography, {\n        gutterBottom: true,\n        variant: \"title\",\n        component: \"h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, \"Requests\"), React.createElement(VenRequestedReportTable, {\n        ven: ven,\n        requestedReport: requestedReport,\n        handleDeleteRequestClick: this.handleDeleteRequestClick,\n        handleViewReportRequestDetail: this.handleViewReportRequestDetail,\n        classes: classes,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return VenDetailReport;\n}(React.Component);\nexport default VenDetailReport;","map":{"version":3,"sources":["/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/src/components/VenDetail/VenDetailReport.js"],"names":["React","PropTypes","classNames","withStyles","MuiThemeProvider","createMuiTheme","VtnConfigurationVenCard","VtnConfigurationMarketContextCard","VtnConfigurationGroupCard","MarketContextSelectDialog","GroupSelectDialog","Input","InputBase","InputLabel","TextField","FormControl","Grid","Typography","Divider","GridList","GridListTile","GridListTileBar","IconButton","StarBorderIcon","ChipInput","Button","AddIcon","RemoveIcon","SearchIcon","SnackbarContent","DoneIcon","CloseIcon","CloudDownloadIcon","VenDetailHeader","Table","TableBody","TableCell","TableHead","TableRow","Paper","history","iCalDurationInSeconds","formatTimestamp","isActionReport","isHistoryReport","isTelemetryReport","VenAvailableReportTable","props","classes","availableReport","ven","getActionLabel","report","reportName","getReportBehavior","behavior","getFormatedCreatedDatetime","format","createdDatetime","date","time","tz","onClick","reportSpecifierId","event","handleViewReportDetail","root","table","map","row","id","handleCreateRequestClick","VenRequestedReportTable","requestedReport","handleDeleteRequestClick","request","end","start","granularity","reportBackDuration","groupByReportRequestId","i","reportRequestId","group","duration","push","req","Object","values","handleViewReportRequestDetail","length","VenDetailReport","handleRequestRegisterReportClick","requestRegisterReport","username","handleSendRegisterReportClick","sendRegisterReport","cancelRequestReportSubscription","state","marginTop","marginRight","marginBottom","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\n\nimport { withStyles, MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\nimport { VtnConfigurationVenCard, VtnConfigurationMarketContextCard, VtnConfigurationGroupCard } from '../common/VtnConfigurationCard'\nimport { MarketContextSelectDialog, GroupSelectDialog } from '../common/VtnconfigurationDialog'\n\nimport Input from '@material-ui/core/Input';\nimport InputBase from '@material-ui/core/InputBase';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport TextField from '@material-ui/core/TextField';\nimport FormControl from '@material-ui/core/FormControl';\nimport Grid from '@material-ui/core/Grid';\n\n\nimport Typography from '@material-ui/core/Typography';\n\nimport Divider from '@material-ui/core/Divider';\n\n\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\n\nimport IconButton from '@material-ui/core/IconButton';\n\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\n\nimport ChipInput from 'material-ui-chip-input'\n\nimport Button from '@material-ui/core/Button';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport SearchIcon from '@material-ui/icons/Search';\n\n\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport DoneIcon from '@material-ui/icons/Done';\nimport CloseIcon from '@material-ui/icons/Close';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\n\nimport VenDetailHeader from './VenDetailHeader'\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\n\n\nimport { history } from '../../store/configureStore';\n\nimport {iCalDurationInSeconds, formatTimestamp} from '../../utils/time'\nimport {isActionReport, isHistoryReport, isTelemetryReport} from '../../utils/venReport'\n\n\n\n\nvar VenAvailableReportTable = (props) => {\n  const {classes, availableReport, ven} = props\n\n  var getActionLabel = (report) => {\n    switch(report.reportName) {\n      case \"METADATA_HISTORY_USAGE\":\n        return \"Request\";\n      case \"METADATA_TELEMETRY_USAGE\":\n        return \"Subscribe\";\n      default:\n        return \"Request\";\n\n    }\n  }\n\n  var getReportBehavior = (report) => {\n    var behavior = \"Unknown\";\n    if(isActionReport(report)) {\n      behavior = \"Action\"\n    }\n    else if(isHistoryReport(report)) {\n      behavior = \"History\"\n    }\n    else if(isTelemetryReport(report)) {\n      behavior = \"Telemetry\"\n    }\n    return behavior\n  }\n\n  var getFormatedCreatedDatetime = (report) => {\n    var format = formatTimestamp(report.createdDatetime);\n    return (\n      <span>{format.date}<br/>{format.time} {format.tz}</span>\n    );\n  }\n\n  var onClick = reportSpecifierId => event => props.handleViewReportDetail(reportSpecifierId)\n  return (\n    <Paper className={classes.root}>\n      <Table className={classes.table}>\n        <TableHead>\n          <TableRow>\n            <TableCell align=\"right\">Report Behavior</TableCell>\n            <TableCell align=\"right\">Specifier ID</TableCell>\n            <TableCell align=\"right\">Created<br/>Date/Time</TableCell>\n            \n            <TableCell align=\"right\">Report Name</TableCell>\n            <TableCell align=\"right\"></TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {availableReport.map(row => (\n            <TableRow key={row.id}\n              hover\n          \n               >\n               <TableCell scope=\"row\" onClick={onClick(row.reportSpecifierId)} align=\"right\">{getReportBehavior(row)}</TableCell>\n              <TableCell scope=\"row\" onClick={onClick(row.reportSpecifierId)} align=\"right\">{row.reportSpecifierId}</TableCell>\n              <TableCell scope=\"row\" onClick={onClick(row.reportSpecifierId)} align=\"right\">{getFormatedCreatedDatetime(row)}</TableCell>\n              \n              <TableCell scope=\"row\" onClick={onClick(row.reportSpecifierId)} align=\"right\">{row.reportName}</TableCell>\n              <TableCell align=\"right\">\n               <Button size=\"small\" color=\"primary\" onClick={function(reportSpecifierId) {\n                  return () => {props.handleCreateRequestClick(reportSpecifierId);}\n                }(row.reportSpecifierId)  }>{ getActionLabel(row)}</Button>\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </Paper>\n  );\n}\n\nvar VenRequestedReportTable = (props) => {\n  const {classes, requestedReport, ven, handleDeleteRequestClick} = props\n  var getActionLabel = (request) => {\n    if(request.end != null || request.start != null)  {\n      return \"DELETE\"\n    } else if(iCalDurationInSeconds(request.granularity) == 0 || iCalDurationInSeconds(request.reportBackDuration) == 0 )  {\n      return \"DELETE\"\n    } else if(iCalDurationInSeconds(request.granularity) != 0 && iCalDurationInSeconds(request.reportBackDuration) != 0 )  {\n      return \"UNSUBSCRIBE\"\n    }\n  }\n\n  var getFormatedCreatedDatetime = (report) => {\n    var format = formatTimestamp(report.createdDatetime);\n    return (\n      <span>{format.date}<br/>{format.time} {format.tz}</span>\n    );\n  }\n\n  var groupByReportRequestId = {};\n\n  for(var i in requestedReport) {\n    var reportRequestId = requestedReport[i].reportRequestId;\n    var group = groupByReportRequestId[reportRequestId];\n    if(group == null) {\n      group = {}\n      group.reportRequestId = requestedReport[i].reportRequestId;\n      group.reportSpecifierId = requestedReport[i].reportSpecifierId;\n      group.createdDatetime = requestedReport[i].createdDatetime;\n      group.start = requestedReport[i].createdDatetime;\n      group.duration = requestedReport[i].duration;\n      group.granularity = requestedReport[i].granularity;\n      group.reportBackDuration = requestedReport[i].reportBackDuration;\n      group.request = [];\n    }\n    group.request.push(requestedReport[i]);\n\n     groupByReportRequestId[reportRequestId] = group;\n\n  }\n\n\n  var req = Object.values(groupByReportRequestId)\n\n  var onClick = (reportSpecifierId, reportRequestId) => event => props.handleViewReportRequestDetail(reportSpecifierId, reportRequestId)\n\n\n  return (\n    <Paper className={classes.root}>\n      <Table className={classes.table}>\n        <TableHead>\n          <TableRow>\n            <TableCell align=\"right\">report request ID</TableCell>\n            <TableCell align=\"right\">Specifier ID</TableCell>\n            <TableCell align=\"right\"># rIDs</TableCell>\n            <TableCell align=\"right\">Created<br/>Date/Time</TableCell>\n            <TableCell align=\"right\"></TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {req.map(row => {\n            return (\n              <TableRow key={row.reportRequestId} hover>\n                <TableCell scope=\"row\" onClick={onClick(row.reportSpecifierId, row.reportRequestId)} align=\"right\">{row.reportRequestId}</TableCell>\n                <TableCell scope=\"row\" onClick={onClick(row.reportSpecifierId, row.reportRequestId)} align=\"right\">{row.reportSpecifierId}</TableCell>\n                <TableCell scope=\"row\" onClick={onClick(row.reportSpecifierId, row.reportRequestId)} align=\"right\">{row.request.length}</TableCell>\n                <TableCell scope=\"row\" onClick={onClick(row.reportSpecifierId, row.reportRequestId)} align=\"right\">{getFormatedCreatedDatetime(row)}</TableCell>\n                <TableCell align=\"right\">\n                  <Button size=\"small\" color=\"secondary\" onClick={function(reportRequestId) {\n                    return () => {handleDeleteRequestClick(reportRequestId)}\n                  }(row.reportRequestId)  }> { getActionLabel(row)} </Button>\n                </TableCell>\n              </TableRow>\n            )\n          })}\n        </TableBody>\n      </Table>\n    </Paper>\n  );\n}\n\n\nexport class VenDetailReport extends React.Component {\n  constructor( props ) {\n    super( props );\n    this.state = {}\n  }\n\n  handleRequestRegisterReportClick = () => {\n    this.props.requestRegisterReport( this.props.ven.username);\n  }\n\n  handleSendRegisterReportClick = () => {\n    this.props.sendRegisterReport( this.props.ven.username);\n  }\n\n  handleCreateRequestClick = (reportSpecifierId) => {\n    history.push(\"/ven/detail/\"+this.props.ven.username+\"/reports/\"+reportSpecifierId+\"/create\")\n  }\n\n  handleDeleteRequestClick = (reportRequestId) => {\n    this.props.cancelRequestReportSubscription(this.props.ven.username, reportRequestId)\n  }\n\n  handleViewReportDetail = (reportSpecifierId) => {\n    history.push(\"/ven/detail/\"+this.props.ven.username+\"/reports/\"+reportSpecifierId);\n  }\n\n  handleViewReportRequestDetail = (reportSpecifierId, reportRequestId) => {\n    history.push(\"/ven/detail/\"+this.props.ven.username+\"/reports/\"+reportSpecifierId+\"/requests/\"+reportRequestId);\n  }\n\n  render() {\n    const {classes, ven, availableReport, requestedReport, cancelRequestReportSubscription} = this.props;\n\n    return (\n    <div className={ classes.root } >\n      <VenDetailHeader classes={classes} ven={ven} actions={[\n         <Grid  key=\"report_action_first_row\" container spacing={ 12 }>\n          <Grid item xs={ 6 }>\n            <Button key=\"btn_create\"\n                    style={ { marginTop: 15 } }\n                    variant=\"outlined\"\n                    color=\"primary\"\n                    fullWidth={true}\n                    size=\"small\"\n                    onClick={this.handleRequestRegisterReportClick}>\n              <CloudDownloadIcon style={ { marginRight: 15 } }/> REQUIRE REPORTS\n            </Button>\n          </Grid>\n          <Grid item xs={ 6 }>\n            <Button key=\"btn_create\"\n                    style={ { marginTop: 15 } }\n                    variant=\"outlined\"\n                    color=\"primary\"\n                    fullWidth={true}\n                    size=\"small\"\n                    onClick={this.handleSendRegisterReportClick}>\n              <CloudDownloadIcon style={ { marginRight: 15 } }/> SEND REQUESTS\n            </Button>\n          </Grid>\n           <Grid item xs={ 6 }>\n          <Button key=\"btn_create\"\n                  style={ { marginTop: 15 } }\n                  variant=\"outlined\"\n                  color=\"secondary\"\n                  fullWidth={true}\n                  size=\"small\">\n            <RemoveIcon style={ { marginRight: 15 } }/> CLEAN REQUESTS\n          </Button>\n        </Grid>\n        <Grid item xs={ 6 }>\n          <Button key=\"btn_create\"\n                  style={ { marginTop: 15 } }\n                  variant=\"outlined\"\n                  color=\"secondary\"\n                  fullWidth={true}\n                  size=\"small\">\n            <RemoveIcon style={ { marginRight: 15 } }/> CLEAN REPORTS\n          </Button>\n        </Grid>\n        </Grid>\n      ]\n      }/>\n      <Divider style={ { marginBottom: '30px', marginTop: '20px' } } />\n      <VenAvailableReportTable ven={ven} \n        availableReport={availableReport} classes={classes} \n        handleViewReportDetail={this.handleViewReportDetail}\n        handleCreateRequestClick={this.handleCreateRequestClick}/>\n\n\n      <Divider style={ { marginBottom: '30px', marginTop: '20px' } } />\n      <Typography gutterBottom\n                  variant=\"title\"\n                  component=\"h2\">\n        Requests\n      </Typography>\n      <VenRequestedReportTable ven={ven} requestedReport={requestedReport}\n         handleDeleteRequestClick={this.handleDeleteRequestClick} \n         handleViewReportRequestDetail={this.handleViewReportRequestDetail} classes={classes}/>\n\n     \n    </div>\n    );\n  }\n}\n\nexport default VenDetailReport;\n"]},"metadata":{},"sourceType":"module"}