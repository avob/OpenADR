{"ast":null,"code":"import _classCallCheck from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/src/components/containers/EventDetailPage.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as vtnConfigurationActions from '../../actions/vtnConfigurationActions';\nimport * as eventActions from '../../actions/eventActions';\nimport * as venActions from '../../actions/venActions';\nimport { withStyles } from '@material-ui/core/styles';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport EventDetailDescriptor from '../EventDetail/EventDetailDescriptor';\nimport EventDetailActivePeriod from '../EventDetail/EventDetailActivePeriod';\nimport EventDetailSignal from '../EventDetail/EventDetailSignal';\nimport EventDetailTarget from '../EventDetail/EventDetailTarget';\nimport EventDetailVenResponse from '../EventDetail/EventDetailVenResponse';\nimport green from '@material-ui/core/colors/green';\nimport red from '@material-ui/core/colors/red';\nimport { history } from '../../store/configureStore';\n\nfunction TabContainer(props) {\n  return React.createElement(Typography, {\n    component: \"div\",\n    style: {\n      padding: 8 * 3\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, props.children);\n}\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      flexGrow: 1\n    },\n    container: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    },\n    textField: {\n      marginLeft: theme.spacing.unit,\n      marginRight: theme.spacing.unit\n    },\n    dense: {\n      marginTop: 19\n    },\n    menu: {\n      width: 200\n    },\n    formControl: {\n      margin: theme.spacing.unit,\n      display: 'flex'\n    },\n    card: {\n      maxWidth: 350,\n      minWidth: 350\n    },\n    media: {\n      height: 40,\n      paddingTop: 10,\n      paddingRight: 10\n    },\n    button: {\n      margin: theme.spacing.unit\n    },\n    success: {\n      backgroundColor: green[600]\n    },\n    error: {\n      backgroundColor: red[600]\n    },\n    iconButton: {\n      marginTop: 10\n    }\n  };\n};\n\nexport var EventDetailPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EventDetailPage, _React$Component);\n\n  function EventDetailPage() {\n    var _this;\n\n    _classCallCheck(this, EventDetailPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EventDetailPage).call(this));\n\n    _this.handleChange = function (event, value) {\n      _this.setState({\n        value: value\n      });\n\n      switch (value) {\n        case 0:\n          history.push(\"/event/detail/\" + _this.props.match.params.id + \"/descriptor\");\n          break;\n\n        case 1:\n          history.push(\"/event/detail/\" + _this.props.match.params.id + \"/activeperiod\");\n          break;\n\n        case 2:\n          history.push(\"/event/detail/\" + _this.props.match.params.id + \"/signal\");\n          break;\n\n        case 3:\n          history.push(\"/event/detail/\" + _this.props.match.params.id + \"/target\");\n          break;\n\n        case 4:\n          history.push(\"/event/detail/\" + _this.props.match.params.id + \"/venresponse\");\n          break;\n      }\n    };\n\n    _this.updateCopySignals = function (index, newSignal) {\n      var copySignals = _this.state.copySignals;\n      copySignals[index] = newSignal;\n\n      _this.setState({\n        copySignals: copySignals,\n        editMode: true\n      });\n    };\n\n    _this.removeCopySignals = function (index) {\n      var copySignals = _this.state.copySignals;\n      copySignals.splice(index, 1);\n\n      _this.setState({\n        copySignals: copySignals,\n        editMode: true\n      });\n    };\n\n    _this.updateCopyTargets = function (newTargets) {\n      _this.setState({\n        copyTargets: newTargets,\n        editMode: true\n      });\n    };\n\n    _this.addCopySignals = function (index) {\n      var copySignals = _this.state.copySignals;\n      copySignals.push({\n        signalName: \"\",\n        signalType: \"\",\n        unitType: \"\",\n        intervals: [],\n        currentValue: \"\"\n      });\n\n      _this.setState({\n        copySignals: copySignals,\n        editMode: true\n      });\n    };\n\n    _this.updateEvent = function (published) {\n      var dto = {\n        published: published,\n        signals: _this.state.copySignals,\n        targets: _this.state.copyTargets\n      };\n\n      _this.props.eventActions.updateEvent(_this.props.match.params.id, dto);\n\n      _this.setState({\n        editMode: false\n      });\n    };\n\n    _this.onVenSuggestionsFetchRequested = function (e) {\n      var filters = [];\n      filters.push({\n        type: \"VEN\",\n        value: e.value\n      });\n\n      _this.props.venActions.searchVen(filters, 0, 5);\n    };\n\n    _this.onVenSuggestionsClearRequested = function () {};\n\n    _this.onVenSuggestionsSelect = function (ven) {\n      var filters = _this.state.filters;\n      filters.push({\n        type: \"VEN\",\n        value: ven.username\n      });\n\n      _this.setState({\n        filters: filters\n      });\n\n      _this.refreshEvent();\n    };\n\n    _this.state = {\n      value: 0,\n      copySignals: [],\n      copyTargets: [],\n      editMode: false\n    };\n    return _this;\n  }\n\n  _createClass(EventDetailPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.vtnConfigurationActions.loadMarketContext();\n      this.props.vtnConfigurationActions.loadGroup();\n      this.props.eventActions.loadEventDetail(this.props.match.params.id);\n      this.props.eventActions.loadEventVenResponse(this.props.match.params.id);\n\n      if (this.props.event_detail.event.signals) {\n        this.setState({\n          copySignals: this.props.event_detail.event.signals\n        });\n      }\n\n      if (this.props.event_detail.event.targets) {\n        this.setState({\n          copyTargets: this.props.event_detail.event.targets\n        });\n      }\n\n      switch (this.props.match.params.panel) {\n        case \"descriptor\":\n          this.setState({\n            value: 0\n          });\n          break;\n\n        case \"activeperiod\":\n          this.setState({\n            value: 1\n          });\n          break;\n\n        case \"signal\":\n          this.setState({\n            value: 2\n          });\n          break;\n\n        case \"target\":\n          this.setState({\n            value: 3\n          });\n          break;\n\n        case \"venresponse\":\n          this.setState({\n            value: 4\n          });\n          break;\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.props.event_detail.event.signals != prevProps.event_detail.event.signals) {\n        this.setState({\n          copySignals: this.props.event_detail.event.signals\n        });\n      }\n\n      if (this.props.event_detail.event.targets != prevProps.event_detail.event.targets) {\n        this.setState({\n          copyTargets: this.props.event_detail.event.targets\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          event_detail = _this$props.event_detail;\n      var value = this.state.value;\n      if (!event_detail.event.activePeriod) return null;\n      return React.createElement(\"div\", {\n        className: classes.root,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, React.createElement(Tabs, {\n        value: this.state.value,\n        onChange: this.handleChange,\n        indicatorColor: \"primary\",\n        textColor: \"primary\",\n        centered: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(Tab, {\n        label: \"Descriptor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }), React.createElement(Tab, {\n        label: \"Active Period\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }), React.createElement(Tab, {\n        label: \"Signals\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }), React.createElement(Tab, {\n        label: \"Targets\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }), React.createElement(Tab, {\n        label: \"Ven Responses\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      })), React.createElement(Divider, {\n        variant: \"middle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }), value === 0 && React.createElement(TabContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(EventDetailDescriptor, {\n        classes: classes,\n        event: event_detail.event,\n        activeEvent: this.props.eventActions.activeEvent,\n        cancelEvent: this.props.eventActions.cancelEvent,\n        publishEvent: this.props.eventActions.publishEvent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      })), value === 1 && React.createElement(TabContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(EventDetailActivePeriod, {\n        classes: classes,\n        event: event_detail.event,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      })), value === 2 && React.createElement(TabContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(EventDetailSignal, {\n        classes: classes,\n        event: event_detail.event,\n        updateEvent: this.updateEvent,\n        editMode: this.state.editMode,\n        copySignals: this.state.copySignals,\n        updateCopySignals: this.updateCopySignals,\n        removeCopySignals: this.removeCopySignals,\n        addCopySignals: this.addCopySignals,\n        publishEvent: this.props.eventActions.publishEvent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      })), value === 3 && React.createElement(TabContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, React.createElement(EventDetailTarget, {\n        classes: classes,\n        event: event_detail.event,\n        updateEvent: this.updateEvent,\n        group: event_detail.group,\n        editMode: this.state.editMode,\n        copyTargets: this.state.copyTargets,\n        updateCopyTargets: this.updateCopyTargets,\n        ven: event_detail.ven,\n        onVenSuggestionsFetchRequested: this.onVenSuggestionsFetchRequested,\n        onVenSuggestionsClearRequested: this.onVenSuggestionsClearRequested,\n        onVenSuggestionsSelect: this.props.onVenSuggestionsSelect,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      })), value === 4 && React.createElement(TabContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(EventDetailVenResponse, {\n        classes: classes,\n        event: event_detail.event,\n        venResponse: event_detail.venResponse,\n        refreshVenResponse: function refreshVenResponse() {\n          _this2.props.eventActions.loadEventVenResponse(_this2.props.match.params.id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return EventDetailPage;\n}(React.Component);\nEventDetailPage.propTypes = {\n  eventActions: PropTypes.object.isRequired\n};\n\nfunction mapStateToProps(state) {\n  return {\n    event_detail: state.event_detail\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    eventActions: bindActionCreators(eventActions, dispatch),\n    vtnConfigurationActions: bindActionCreators(vtnConfigurationActions, dispatch),\n    venActions: bindActionCreators(venActions, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(EventDetailPage));","map":{"version":3,"sources":["/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/src/components/containers/EventDetailPage.js"],"names":["React","PropTypes","connect","bindActionCreators","vtnConfigurationActions","eventActions","venActions","withStyles","Tabs","Tab","Typography","Divider","EventDetailDescriptor","EventDetailActivePeriod","EventDetailSignal","EventDetailTarget","EventDetailVenResponse","green","red","history","TabContainer","props","padding","children","styles","theme","root","flexGrow","container","display","flexWrap","textField","marginLeft","spacing","unit","marginRight","dense","marginTop","menu","width","formControl","margin","card","maxWidth","minWidth","media","height","paddingTop","paddingRight","button","success","backgroundColor","error","iconButton","EventDetailPage","handleChange","event","value","setState","push","match","params","id","updateCopySignals","index","newSignal","copySignals","state","editMode","removeCopySignals","splice","updateCopyTargets","newTargets","copyTargets","addCopySignals","signalName","signalType","unitType","intervals","currentValue","updateEvent","published","dto","signals","targets","onVenSuggestionsFetchRequested","e","filters","type","searchVen","onVenSuggestionsClearRequested","onVenSuggestionsSelect","ven","username","refreshEvent","loadMarketContext","loadGroup","loadEventDetail","loadEventVenResponse","event_detail","panel","prevProps","prevState","classes","activePeriod","activeEvent","cancelEvent","publishEvent","group","venResponse","Component","propTypes","object","isRequired","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport * as vtnConfigurationActions from '../../actions/vtnConfigurationActions';\nimport * as eventActions from '../../actions/eventActions';\nimport * as venActions from '../../actions/venActions';\n\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\n\nimport EventDetailDescriptor from '../EventDetail/EventDetailDescriptor'\nimport EventDetailActivePeriod from '../EventDetail/EventDetailActivePeriod'\nimport EventDetailSignal from '../EventDetail/EventDetailSignal'\nimport EventDetailTarget from '../EventDetail/EventDetailTarget'\nimport EventDetailVenResponse from '../EventDetail/EventDetailVenResponse'\n\nimport green from '@material-ui/core/colors/green';\nimport red from '@material-ui/core/colors/red';\n\nimport { history } from '../../store/configureStore';\n\n\nfunction TabContainer( props ) {\n  return (\n  <Typography component=\"div\" style={ { padding: 8 * 3 } }>\n    { props.children }\n  </Typography>\n  );\n}\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  container: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  textField: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n  },\n  dense: {\n    marginTop: 19,\n  },\n  menu: {\n    width: 200,\n  },\n  formControl: {\n    margin: theme.spacing.unit,\n    display:'flex'\n  },\n  card: {\n    maxWidth: 350,\n    minWidth: 350,\n  },\n  media: {\n    height: 40,\n    paddingTop: 10,\n    paddingRight: 10\n  },\n  button: {\n    margin: theme.spacing.unit,\n  },\n  success: {\n    backgroundColor: green[600],\n  },\n  error: {\n    backgroundColor: red[600],\n  },\n  iconButton: {\n    marginTop: 10\n  },\n});\n\nexport class EventDetailPage extends React.Component {\n\n  constructor() {\n    super()\n    this.state = {\n      value: 0,\n      copySignals: [],\n      copyTargets: [],\n      editMode: false\n    };\n  }\n\n  handleChange = (event, value) => {\n    this.setState( {\n      value\n    } );\n    switch(value) {\n      case 0:\n        history.push(\"/event/detail/\"+this.props.match.params.id+\"/descriptor\")\n        break;\n      case 1:\n        history.push(\"/event/detail/\"+this.props.match.params.id+\"/activeperiod\")\n        break;\n      case 2:\n        history.push(\"/event/detail/\"+this.props.match.params.id+\"/signal\")\n        break;\n      case 3:\n        history.push(\"/event/detail/\"+this.props.match.params.id+\"/target\")\n        break;\n      case 4:\n        history.push(\"/event/detail/\"+this.props.match.params.id+\"/venresponse\")\n        break;\n    }\n\n  };\n\n  componentDidMount() {\n    this.props.vtnConfigurationActions.loadMarketContext();\n    this.props.vtnConfigurationActions.loadGroup();\n    this.props.eventActions.loadEventDetail(this.props.match.params.id);\n    this.props.eventActions.loadEventVenResponse(this.props.match.params.id);\n\n    if(this.props.event_detail.event.signals) {\n      this.setState({copySignals: this.props.event_detail.event.signals});\n    }\n    if(this.props.event_detail.event.targets) {\n      this.setState({copyTargets: this.props.event_detail.event.targets});\n    }\n\n    switch(this.props.match.params.panel){\n      case \"descriptor\":\n        this.setState({value:0});\n        break;\n      case \"activeperiod\":\n        this.setState({value:1});\n        break;\n      case \"signal\":\n        this.setState({value:2});\n        break;\n      case \"target\":\n        this.setState({value:3});\n        break;\n      case \"venresponse\":\n        this.setState({value:4});\n        break;\n    }\n    \n\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if(this.props.event_detail.event.signals != prevProps.event_detail.event.signals) {\n      this.setState({copySignals: this.props.event_detail.event.signals});\n    }\n    if(this.props.event_detail.event.targets != prevProps.event_detail.event.targets) {\n      this.setState({copyTargets: this.props.event_detail.event.targets});\n    }\n\n    \n  }\n\n  updateCopySignals = (index, newSignal) => {\n    var copySignals = this.state.copySignals;\n    copySignals[index] = newSignal;\n    this.setState({copySignals: copySignals, editMode: true});\n  }\n\n  removeCopySignals = (index) => {\n    var copySignals = this.state.copySignals;\n    copySignals.splice(index, 1)\n    this.setState({copySignals: copySignals, editMode: true});\n  }\n\n  updateCopyTargets = (newTargets) => {\n    this.setState({copyTargets: newTargets, editMode: true});\n  }\n\n   addCopySignals = (index) => {\n    var copySignals = this.state.copySignals;\n    copySignals.push({\n        signalName: \"\",\n        signalType: \"\",\n        unitType: \"\",\n        intervals: [],\n        currentValue: \"\",\n      });\n    this.setState({copySignals: copySignals, editMode: true});\n  }\n\n  updateEvent = (published) => {\n    var dto = {\n      published:published,\n      signals: this.state.copySignals,\n      targets: this.state.copyTargets\n    }\n    this.props.eventActions.updateEvent(this.props.match.params.id, dto)\n    this.setState({editMode: false});\n  }\n\n  onVenSuggestionsFetchRequested = (e) => {\n    var filters = [];\n    filters.push({type:\"VEN\", value:e.value});\n    this.props.venActions.searchVen(filters, 0, 5);\n  }\n\n  onVenSuggestionsClearRequested = () => {\n  }\n\n  onVenSuggestionsSelect = (ven) => {\n     var filters = this.state.filters;\n    filters.push({type:\"VEN\", value:ven.username});\n    this.setState({filters});\n    this.refreshEvent();\n  }\n\n  render() {\n    const {classes, event_detail} = this.props;\n    const {value} = this.state;\n    if(!event_detail.event.activePeriod ) return null;\n    return (\n     <div className={ classes.root }>\n      <Tabs value={ this.state.value }\n            onChange={ this.handleChange }\n            indicatorColor=\"primary\"\n            textColor=\"primary\"\n            centered>\n        <Tab label=\"Descriptor\" />\n        <Tab label=\"Active Period\" />\n        <Tab label=\"Signals\" />\n        <Tab label=\"Targets\" />\n        <Tab label=\"Ven Responses\" />\n      </Tabs>\n      <Divider variant=\"middle\" />\n      { value === 0 && <TabContainer>\n                <EventDetailDescriptor classes={classes} event={event_detail.event} \n                  activeEvent={this.props.eventActions.activeEvent}\n                  cancelEvent={this.props.eventActions.cancelEvent}\n                  publishEvent={this.props.eventActions.publishEvent}/>\n                     \n                       </TabContainer> }     \n      { value === 1 && <TabContainer>\n                <EventDetailActivePeriod classes={classes} event={event_detail.event}/>\n                     \n                       </TabContainer> }\n      { value === 2 && <TabContainer>\n                <EventDetailSignal classes={classes} event={event_detail.event} \n                  updateEvent={this.updateEvent}\n                   \n                  \n                  editMode={this.state.editMode}\n                  copySignals={this.state.copySignals}\n                  updateCopySignals={this.updateCopySignals}\n                 \n                  removeCopySignals={this.removeCopySignals}\n                  addCopySignals={this.addCopySignals}\n                  publishEvent={this.props.eventActions.publishEvent}\n                  />\n                  \n                       </TabContainer> }\n      { value === 3 && <TabContainer>\n                <EventDetailTarget classes={classes} event={event_detail.event}\n\n                  updateEvent={this.updateEvent}\n                  group={event_detail.group}\n                  editMode={this.state.editMode}\n                  copyTargets={this.state.copyTargets}\n                  updateCopyTargets={this.updateCopyTargets}\n                   ven={event_detail.ven}\n                onVenSuggestionsFetchRequested={this.onVenSuggestionsFetchRequested}\n                onVenSuggestionsClearRequested={this.onVenSuggestionsClearRequested}\n                onVenSuggestionsSelect={this.props.onVenSuggestionsSelect}\n                  />\n                     \n                       </TabContainer> }\n\n      { value === 4 && <TabContainer>\n                <EventDetailVenResponse classes={classes} event={event_detail.event} venResponse={event_detail.venResponse}\n                refreshVenResponse={() => {this.props.eventActions.loadEventVenResponse(this.props.match.params.id)}}\n               />\n                     \n                       </TabContainer> }\n                \n\n\n    </div>\n\n    );\n  }\n}\n\nEventDetailPage.propTypes = {\n  eventActions: PropTypes.object.isRequired\n};\n\nfunction mapStateToProps( state ) {\n  return {\n    event_detail: state.event_detail\n  };\n}\n\nfunction mapDispatchToProps( dispatch ) {\n  return {\n    eventActions: bindActionCreators( eventActions, dispatch ),\n    vtnConfigurationActions: bindActionCreators( vtnConfigurationActions, dispatch ),\n    venActions: bindActionCreators( venActions, dispatch ),\n\n    \n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)( withStyles( styles )( EventDetailPage ) );\n"]},"metadata":{},"sourceType":"module"}