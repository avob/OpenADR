{"ast":null,"code":"import _classCallCheck from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/src/components/VenCreate/VenCreate.js\";\nimport React from 'react';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport VenCreateIndentificationStep from './VenCreateIndentificationStep';\nimport UserCreateAuthenticationFormPanel from '../common/UserCreateAuthenticationFormPanel';\nimport VenCreateConfirmationStep from './VenCreateConfirmationStep';\nimport Paper from '@material-ui/core/Paper';\nvar defaultOadrProfile = '20b';\nvar oadrProfiles = {\n  '20b': {\n    label: 'Oadr 2.0b'\n  },\n  '20a': {\n    label: 'Oadr 2.0a'\n  }\n};\nvar defaultAuthenticationType = 'x509';\nvar authenticationTypes = {\n  x509: {\n    label: 'Client certificate authentication'\n  },\n  login: {\n    label: 'Login / Password authentication'\n  }\n};\n\nfunction getSteps() {\n  return ['Identification settings', 'Authentication settings', 'Confirmation'];\n}\n\nexport var VenCreate =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(VenCreate, _React$Component);\n\n  function VenCreate(props) {\n    var _this;\n\n    _classCallCheck(this, VenCreate);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(VenCreate).call(this, props));\n\n    _this.handleFinish = function () {\n      _this.handleCreateVen();\n    };\n\n    _this.handleNext = function () {\n      var activeStep = _this.state.activeStep;\n\n      if (activeStep === getSteps().length - 1) {\n        _this.handleFinish();\n      } else {\n        _this.setState({\n          activeStep: activeStep + 1\n        });\n      }\n    };\n\n    _this.handleBack = function () {\n      _this.setState(function (state) {\n        return {\n          activeStep: state.activeStep - 1\n        };\n      });\n    };\n\n    _this.handleReset = function () {\n      _this.setState({\n        activeStep: 0\n      });\n    };\n\n    _this.handleIndentificationStepChange = function (identification) {\n      _this.setState({\n        identification: identification\n      });\n    };\n\n    _this.handleAuthenticationStepChange = function (authentication) {\n      _this.setState({\n        authentication: authentication\n      });\n    };\n\n    _this.handleAuthenticationTypeChange = function (e) {\n      _this.setState({\n        authenticationType: e.target.value\n      });\n    };\n\n    _this.handleAuthenticationVenIdChange = function (e) {\n      _this.setState({\n        authenticationVenId: e.target.value\n      });\n    };\n\n    _this.handleAuthenticationPasswordChange = function (e) {\n      _this.setState({\n        authenticationPassword: e.target.value\n      });\n    };\n\n    _this.handleAuthenticationPasswordConfirmChange = function (e) {\n      _this.setState({\n        authenticationPasswordConfirm: e.target.value\n      });\n    };\n\n    _this.handleCreateVen = function () {\n      var _this$state = _this.state,\n          identification = _this$state.identification,\n          authentication = _this$state.authentication;\n      var dto = {\n        'commonName': identification.venCommonName,\n        'needCertificateGeneration': identification.needCertificateGeneration,\n        'oadrProfil': identification.venOadrProfile,\n        'authenticationType': authentication.authenticationType,\n        'username': authentication.authenticationVenId\n      };\n\n      if (authentication.authenticationType === 'login') {\n        dto.password = authentication.authenticationPassword;\n      }\n\n      _this.props.createVen(dto);\n    };\n\n    _this.state = {\n      activeStep: 0,\n      identification: {\n        venCommonName: 'oadr.avob.com',\n        venOadrProfile: defaultOadrProfile,\n        needCertificateGeneration: 'rsa'\n      },\n      authentication: {\n        authenticationTypes: authenticationTypes,\n        authenticationType: defaultAuthenticationType,\n        authenticationPassword: '',\n        authenticationPasswordConfirm: '',\n        authenticationVenId: ''\n      }\n    };\n    return _this;\n  }\n\n  _createClass(VenCreate, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          vtnConfiguration = _this$props.vtnConfiguration;\n      var steps = getSteps();\n      var activeStep = this.state.activeStep;\n      var that = this;\n\n      function getStepContent(step) {\n        switch (step) {\n          case 0:\n            return React.createElement(VenCreateIndentificationStep, {\n              classes: classes,\n              hasError: that.state.hasError,\n              oadrProfiles: oadrProfiles,\n              identification: that.state.identification,\n              onChange: that.handleIndentificationStepChange,\n              vtnConfiguration: vtnConfiguration,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 164\n              },\n              __self: this\n            });\n\n          case 1:\n            return React.createElement(UserCreateAuthenticationFormPanel, {\n              classes: classes,\n              authentication: that.state.authentication,\n              identification: that.state.identification,\n              onChange: that.handleAuthenticationStepChange,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 171\n              },\n              __self: this\n            });\n\n          case 2:\n            return React.createElement(VenCreateConfirmationStep, {\n              classes: classes,\n              authentication: that.state.authentication,\n              identification: that.state.identification,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 176\n              },\n              __self: this\n            });\n\n          default:\n            return 'Unknown step';\n        }\n      }\n\n      function getSetValidation(step) {\n        switch (step) {\n          case 0:\n            return that.state.venCommonName !== '';\n\n          case 1:\n            var hasVenIdWhenNoCertificateGeneration = that.state.needCertificateGeneration !== 'no' || that.state.needCertificateGeneration === 'no' && that.state.authenticationVenId !== '';\n            var hasValidLoginPasswordWhenLoginAuthentication = that.state.authenticationType !== 'login' || that.state.authenticationPassword !== '' && that.state.authenticationPasswordConfirm !== '' && that.state.authenticationPassword === that.state.authenticationPasswordConfirm;\n            return hasVenIdWhenNoCertificateGeneration && hasValidLoginPasswordWhenLoginAuthentication;\n\n          case 2:\n            return true;\n\n          default:\n            return false;\n        }\n      }\n\n      function handleValidatedNext(step) {\n        return function (e) {\n          if (getSetValidation(step)) {\n            if (that.state.hasError) {\n              that.setState({\n                hasError: false\n              });\n            }\n\n            that.handleNext(e);\n          } else {\n            that.setState({\n              hasError: true\n            });\n          }\n        };\n      }\n\n      return React.createElement(\"div\", {\n        className: classes.root,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(Stepper, {\n        activeStep: activeStep,\n        className: classes.stepper,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, steps.map(function (label, index) {\n        var props = {};\n        var labelProps = {};\n        props.completed = false;\n        return React.createElement(Step, Object.assign({\n          key: label\n        }, props, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229\n          },\n          __self: this\n        }), React.createElement(StepLabel, Object.assign({}, labelProps, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230\n          },\n          __self: this\n        }), label));\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, activeStep === steps.length ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        className: classes.instructions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, \"All steps completed - you're finished\"), React.createElement(Button, {\n        onClick: this.handleReset,\n        className: classes.button,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \"Reset\")) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, React.createElement(Button, {\n        disabled: activeStep === 0,\n        onClick: this.handleBack,\n        className: classes.button,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, \"Back\"), React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: handleValidatedNext(activeStep),\n        className: classes.button,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, activeStep === steps.length - 1 ? 'Create Ven' : 'Next')), React.createElement(Typography, {\n        component: \"div\",\n        className: classes.instructions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        elevation: 1,\n        style: {\n          padding: '20px 0px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, getStepContent(activeStep))))));\n    }\n  }]);\n\n  return VenCreate;\n}(React.Component);\nexport default VenCreate;","map":{"version":3,"sources":["/home/bzanni/Documents/github/OpenADR/OpenADRServerVTN20b/frontend/src/components/VenCreate/VenCreate.js"],"names":["React","Stepper","Step","StepLabel","Button","Typography","VenCreateIndentificationStep","UserCreateAuthenticationFormPanel","VenCreateConfirmationStep","Paper","defaultOadrProfile","oadrProfiles","label","defaultAuthenticationType","authenticationTypes","x509","login","getSteps","VenCreate","props","handleFinish","handleCreateVen","handleNext","activeStep","state","length","setState","handleBack","handleReset","handleIndentificationStepChange","identification","handleAuthenticationStepChange","authentication","handleAuthenticationTypeChange","e","authenticationType","target","value","handleAuthenticationVenIdChange","authenticationVenId","handleAuthenticationPasswordChange","authenticationPassword","handleAuthenticationPasswordConfirmChange","authenticationPasswordConfirm","dto","venCommonName","needCertificateGeneration","venOadrProfile","password","createVen","classes","vtnConfiguration","steps","that","getStepContent","step","hasError","getSetValidation","hasVenIdWhenNoCertificateGeneration","hasValidLoginPasswordWhenLoginAuthentication","handleValidatedNext","root","stepper","map","index","labelProps","completed","instructions","button","padding","Component"],"mappings":"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","sourcesContent":["import React from 'react';\n\n\n\n\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\n\nimport VenCreateIndentificationStep from './VenCreateIndentificationStep';\nimport UserCreateAuthenticationFormPanel from '../common/UserCreateAuthenticationFormPanel'\nimport VenCreateConfirmationStep from './VenCreateConfirmationStep';\n\n\nimport Paper from '@material-ui/core/Paper';\n\n\nconst defaultOadrProfile = '20b'\nconst oadrProfiles = {\n  '20b': {\n    label: 'Oadr 2.0b'\n  },\n  '20a': {\n    label: 'Oadr 2.0a'\n  },\n}\nconst defaultAuthenticationType = 'x509'\nconst authenticationTypes = {\n  x509: {\n    label: 'Client certificate authentication'\n  },\n  login: {\n    label: 'Login / Password authentication'\n  }\n}\n\nfunction getSteps() {\n  return [ 'Identification settings', 'Authentication settings', 'Confirmation' ];\n}\n\n\nexport class VenCreate extends React.Component {\n  constructor( props ) {\n    super( props );\n    this.state = {\n      activeStep: 0,\n     \n\n      \n\n\n\n\n      identification: {\n        venCommonName: 'oadr.avob.com',\n        venOadrProfile: defaultOadrProfile,\n        needCertificateGeneration: 'rsa'\n      },\n      authentication: {\n        authenticationTypes:authenticationTypes,\n        authenticationType: defaultAuthenticationType,\n        authenticationPassword: '',\n        authenticationPasswordConfirm: '',\n        authenticationVenId: '',\n        \n      },\n\n    };\n  }\n\n  handleFinish = () => {\n    this.handleCreateVen();\n  }\n\n  handleNext = () => {\n    const {activeStep} = this.state;\n    if ( activeStep === getSteps().length - 1 ) {\n      this.handleFinish();\n    } else {\n      this.setState( {\n        activeStep: activeStep + 1,\n      } );\n    }\n\n  };\n\n  handleBack = () => {\n    this.setState( state => ({\n      activeStep: state.activeStep - 1,\n    }) );\n  };\n\n  handleReset = () => {\n    this.setState( {\n      activeStep: 0,\n    } );\n  };\n\n\n  handleIndentificationStepChange = (identification) => {\n    this.setState({identification});\n  }\n\n  handleAuthenticationStepChange = (authentication) => {\n    this.setState({authentication});\n  } \n\n\n  \n  handleAuthenticationTypeChange = (e) => {\n    this.setState( {\n      authenticationType: e.target.value,\n    } );\n  };\n\n  handleAuthenticationVenIdChange = (e) => {\n    this.setState( {\n      authenticationVenId: e.target.value,\n    } );\n  };\n  handleAuthenticationPasswordChange = (e) => {\n    this.setState( {\n      authenticationPassword: e.target.value,\n    } );\n  };\n  handleAuthenticationPasswordConfirmChange = (e) => {\n    this.setState( {\n      authenticationPasswordConfirm: e.target.value,\n    } );\n  };\n\n  handleCreateVen = () => {\n    const {identification, authentication} = this.state;\n    var dto = {\n      'commonName': identification.venCommonName,\n      'needCertificateGeneration': identification.needCertificateGeneration,\n      'oadrProfil': identification.venOadrProfile,\n\n      'authenticationType': authentication.authenticationType,\n      'username': authentication.authenticationVenId\n    }\n\n    if ( authentication.authenticationType === 'login' ) {\n      dto.password = authentication.authenticationPassword\n    }\n\n    this.props.createVen( dto );\n  }\n\n\n  render() {\n    const {classes, vtnConfiguration} = this.props;\n    const steps = getSteps();\n    const {activeStep} = this.state;\n    var that = this;\n\n\n    function getStepContent( step ) {\n      switch (step) {\n        case 0:\n          return <VenCreateIndentificationStep classes={ classes }\n                                              hasError={ that.state.hasError }\n                                              oadrProfiles={oadrProfiles}\n                                              identification={that.state.identification}\n                                              onChange={that.handleIndentificationStepChange}\n                                              vtnConfiguration={vtnConfiguration} />;\n        case 1:\n          return <UserCreateAuthenticationFormPanel classes={classes}\n            authentication={that.state.authentication}\n            identification={that.state.identification}\n            onChange={that.handleAuthenticationStepChange}/>;\n        case 2:\n          return <VenCreateConfirmationStep classes={ classes } \n            authentication={that.state.authentication}\n            identification={that.state.identification} />;\n        default:\n          return 'Unknown step';\n      }\n    }\n\n    function getSetValidation( step ) {\n      switch (step) {\n        case 0:\n          return that.state.venCommonName !== ''\n        case 1:\n\n          var hasVenIdWhenNoCertificateGeneration = that.state.needCertificateGeneration !== 'no'\n            || (that.state.needCertificateGeneration === 'no' && that.state.authenticationVenId !== '');\n\n          var hasValidLoginPasswordWhenLoginAuthentication = that.state.authenticationType !== 'login' || (that.state.authenticationPassword !== '' &&\n            that.state.authenticationPasswordConfirm !== '' && that.state.authenticationPassword === that.state.authenticationPasswordConfirm);\n\n          return hasVenIdWhenNoCertificateGeneration && hasValidLoginPasswordWhenLoginAuthentication\n        case 2:\n          return true;\n        default:\n          return false\n      }\n    }\n\n    function handleValidatedNext( step ) {\n      return (e) => {\n        if ( getSetValidation( step ) ) {\n          if ( that.state.hasError ) {\n            that.setState( {\n              hasError: false\n            } );\n          }\n          that.handleNext( e );\n        } else {\n          that.setState( {\n            hasError: true\n          } );\n        }\n      }\n    }\n\n    return (\n    <div className={ classes.root }>\n      <Stepper activeStep={ activeStep } className={ classes.stepper }>\n        { steps.map( (label, index) => {\n            const props = {};\n            const labelProps = {};\n            props.completed = false;\n            return (\n            <Step key={ label } {...props}>\n              <StepLabel {...labelProps}>\n                { label }\n              </StepLabel>\n            </Step>\n            );\n          } ) }\n      </Stepper>\n      <div>\n        { activeStep === steps.length ? (\n            <div>\n              <Typography className={ classes.instructions }>\n                All steps completed - you&apos;re finished\n              </Typography>\n              <Button onClick={ this.handleReset } className={ classes.button }>\n                Reset\n              </Button>\n            </div>\n            ) : (\n            <div>\n              <div>\n                <Button disabled={ activeStep === 0 }\n                        onClick={ this.handleBack }\n                        className={ classes.button }>\n                  Back\n                </Button>\n                <Button variant=\"contained\"\n                        color=\"primary\"\n                        onClick={ handleValidatedNext( activeStep ) }\n                        className={ classes.button }>\n                  { activeStep === steps.length - 1 ? 'Create Ven' : 'Next' }\n                </Button>\n              </div>\n              <Typography component=\"div\" className={ classes.instructions }>\n                <Paper elevation={ 1 } style={ { padding: '20px 0px' } }>\n                  { getStepContent( activeStep ) }\n                </Paper>\n              </Typography>\n              \n            </div>\n            ) }\n      </div>\n    </div>\n    );\n  }\n}\n\nexport default VenCreate;\n"]},"metadata":{},"sourceType":"module"}